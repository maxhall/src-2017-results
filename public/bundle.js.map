{"version":3,"file":"bundle.js","sources":["../node_modules/svelte/shared.js","../src/components/CouncilBoxes.html","../src/components/CouncilTable.html","../node_modules/svelte-transitions-fade/module.js","../node_modules/eases-jsnext/dist/eases.es.js","../node_modules/svelte-transitions-slide/module.js","../src/components/Council.html","../src/components/NUSBoxes.html","../src/components/NUSTable.html","../src/components/NUS.html","../src/components/PresidentBars.html","../src/components/PresidentTable.html","../src/components/President.html","../src/components/HoniBars.html","../src/components/HoniTable.html","../src/components/Honi.html","../src/components/Results.html","../src/components/Blog.html","../src/components/TabBar.html","../src/components/Footer.html","../src/components/Header.html","../src/App.html","../src/main.js","../node_modules/pym.js/dist/pym.v1.js"],"sourcesContent":["function noop() {}\n\nfunction assign(target) {\n\tvar k,\n\t\tsource,\n\t\ti = 1,\n\t\tlen = arguments.length;\n\tfor (; i < len; i++) {\n\t\tsource = arguments[i];\n\t\tfor (k in source) target[k] = source[k];\n\t}\n\n\treturn target;\n}\n\nfunction appendNode(node, target) {\n\ttarget.appendChild(node);\n}\n\nfunction insertNode(node, target, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\n// TODO this is out of date\nfunction destroyEach(iterations, detach, start) {\n\tfor (var i = start; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].destroy(detach);\n\t}\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler) {\n\tnode.addEventListener(event, handler, false);\n}\n\nfunction removeListener(node, event, handler) {\n\tnode.removeEventListener(event, handler, false);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tnode.setAttribute(attribute, value);\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule(\n\ta,\n\tb,\n\tdelta,\n\tduration,\n\tease,\n\tfn\n) {\n\tvar keyframes = '{\\n';\n\n\tfor (var p = 0; p <= 1; p += 16.666 / duration) {\n\t\tvar t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + '%{' + fn(t) + '}\\n';\n\t}\n\n\treturn keyframes + '100% {' + fn(b) + '}\\n}';\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tvar hash = 5381;\n\tvar i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro, outgroup) {\n\tvar obj = fn(node, params);\n\tvar duration = obj.duration || 300;\n\tvar ease = obj.easing || linear;\n\tvar cssText;\n\n\t// TODO share <style> tag between all transitions?\n\tif (obj.css && !transitionManager.stylesheet) {\n\t\tvar style = createElement('style');\n\t\tdocument.head.appendChild(style);\n\t\ttransitionManager.stylesheet = style.sheet;\n\t}\n\n\tif (intro) {\n\t\tif (obj.css && obj.delay) {\n\t\t\tcssText = node.style.cssText;\n\t\t\tnode.style.cssText += obj.css(0);\n\t\t}\n\n\t\tif (obj.tick) obj.tick(0);\n\t}\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\t\trun: function(intro, callback) {\n\t\t\tvar program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tintro: intro,\n\t\t\t\tcallback: callback\n\t\t\t};\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\t\tstart: function(program) {\n\t\t\tcomponent.fire(program.intro ? 'intro.start' : 'outro.start', { node: node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.b = program.intro ? 1 : 0;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tprogram.rule = generateRule(\n\t\t\t\t\tprogram.a,\n\t\t\t\t\tprogram.b,\n\t\t\t\t\tprogram.delta,\n\t\t\t\t\tprogram.duration,\n\t\t\t\t\tease,\n\t\t\t\t\tobj.css\n\t\t\t\t);\n\n\t\t\t\ttransitionManager.addRule(program.rule, program.name = '__svelte_' + hash(program.rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(function(anim) {\n\t\t\t\t\t\t// when introing, discard old animations if there are any\n\t\t\t\t\t\treturn anim && (program.delta < 0 || !/__svelte/.test(anim));\n\t\t\t\t\t})\n\t\t\t\t\t.concat(program.name + ' ' + duration + 'ms linear 1 forwards')\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\t\tupdate: function(now) {\n\t\t\tvar program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tvar p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t},\n\t\tdone: function() {\n\t\t\tvar program = this.program;\n\t\t\tthis.t = program.b;\n\t\t\tif (obj.tick) obj.tick(this.t);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\tprogram.callback();\n\t\t\tprogram = null;\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\t\tabort: function() {\n\t\t\tif (obj.tick) obj.tick(1);\n\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\tthis.program = this.pending = null;\n\t\t\tthis.running = false;\n\t\t}\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\n\tadd: function(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule: function(rule, name) {\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule('@keyframes ' + name + ' ' + rule, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext: function() {\n\t\tthis.running = false;\n\n\t\tvar now = window.performance.now();\n\t\tvar i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tvar transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tvar i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule: function(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(function(anim) {\n\t\t\t\treturn anim.slice(0, name.length) !== name;\n\t\t\t})\n\t\t\t.join(', ');\n\t}\n};\n\nfunction differs(a, b) {\n\treturn a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction dispatchObservers(component, group, newState, oldState) {\n\tfor (var key in group) {\n\t\tif (!(key in newState)) continue;\n\n\t\tvar newValue = newState[key];\n\t\tvar oldValue = oldState[key];\n\n\t\tif (differs(newValue, oldValue)) {\n\t\t\tvar callbacks = group[key];\n\t\t\tif (!callbacks) continue;\n\n\t\t\tfor (var i = 0; i < callbacks.length; i += 1) {\n\t\t\t\tvar callback = callbacks[i];\n\t\t\t\tif (callback.__calling) continue;\n\n\t\t\t\tcallback.__calling = true;\n\t\t\t\tcallback.call(component, newValue, oldValue);\n\t\t\t\tcallback.__calling = false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction get(key) {\n\treturn key ? this._state[key] : this._state;\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\thandlers[i].call(this, data);\n\t}\n}\n\nfunction observe(key, callback, options) {\n\tvar group = options && options.defer\n\t\t? this._observers.post\n\t\t: this._observers.pre;\n\n\t(group[key] || (group[key] = [])).push(callback);\n\n\tif (!options || options.init !== false) {\n\t\tcallback.__calling = true;\n\t\tcallback.call(this, this._state[key]);\n\t\tcallback.__calling = false;\n\t}\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = group[key].indexOf(callback);\n\t\t\tif (~index) group[key].splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction observeDev(key, callback, options) {\n\tvar c = (key = '' + key).search(/[^\\w]/);\n\tif (c > -1) {\n\t\tvar message =\n\t\t\t'The first argument to component.observe(...) must be the name of a top-level property';\n\t\tif (c > 0)\n\t\t\tmessage += \", i.e. '\" + key.slice(0, c) + \"' rather than '\" + key + \"'\";\n\n\t\tthrow new Error(message);\n\t}\n\n\treturn observe.call(this, key, callback, options);\n}\n\nfunction on(eventName, handler) {\n\tif (eventName === 'teardown') return this.on('destroy', handler);\n\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction onDev(eventName, handler) {\n\tif (eventName === 'teardown') {\n\t\tconsole.warn(\n\t\t\t\"Use component.on('destroy', ...) instead of component.on('teardown', ...) which has been deprecated and will be unsupported in Svelte 2\"\n\t\t);\n\t\treturn this.on('destroy', handler);\n\t}\n\n\treturn on.call(this, eventName, handler);\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this._root._lock) return;\n\tthis._root._lock = true;\n\tcallAll(this._root._beforecreate);\n\tcallAll(this._root._oncreate);\n\tcallAll(this._root._aftercreate);\n\tthis._root._lock = false;\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.pop()();\n}\n\nvar proto = {\n\tget: get,\n\tfire: fire,\n\tobserve: observe,\n\ton: on,\n\tset: set\n};\n\nvar protoDev = {\n\tget: get,\n\tfire: fire,\n\tobserve: observeDev,\n\ton: onDev,\n\tset: set\n};\n\nexport { differs, dispatchObservers, get, fire, observe, observeDev, on, onDev, set, callAll, proto, protoDev, appendNode, insertNode, detachNode, detachBetween, destroyEach, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setXlinkAttribute, getBindingGroupValue, toNumber, children, claimElement, claimText, linear, generateRule, hash, wrapTransition, transitionManager, noop, assign };\n","<div class=\"results-graphic\">\n  <div class=\"svg-wrapper\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer_1\" viewBox=\"0 0 1000 914.3\">\n      <path ref:seat1 d=\"M0 793h121.4v121.3H0z\" id=\"seat-1\"/>\n      <path ref:seat2 d=\"M146.4 793h121.4v121.3H146.4z\" id=\"seat-2\"/>\n      <path ref:seat3 d=\"M293 793h121.3v121.3H293z\" id=\"seat-3\"/>\n      <path ref:seat4 d=\"M0 646.4h121.4v121.4H0z\" id=\"seat-4\"/>\n      <path ref:seat5 d=\"M146.4 646.4h121.4v121.4H146.4z\" id=\"seat-5\"/>\n      <path ref:seat6 d=\"M293 646.4h121.3v121.4H293z\" id=\"seat-6\"/>\n      <path ref:seat7 d=\"M0 500h121.4v121.4H0z\" id=\"seat-7\"/>\n      <path ref:seat8 d=\"M146.4 500h121.4v121.4H146.4z\" id=\"seat-8\"/>\n      <path ref:seat9 d=\"M293 500h121.3v121.4H293z\" id=\"seat-9\"/>\n      <path ref:seat10 d=\"M0 353.6h121.4V475H0z\" id=\"seat-10\"/>\n      <path ref:seat11 d=\"M146.4 353.6h121.4V475H146.4z\" id=\"seat-11\"/>\n      <path ref:seat12 d=\"M293 353.6h121.3V475H293z\" id=\"seat-12\"/>\n      <path ref:seat13 d=\"M146.4 207h121.4v121.5H146.4z\" id=\"seat-13\"/>\n      <path ref:seat14 d=\"M293 207h121.3v121.5H293z\" id=\"seat-14\"/>\n      <path ref:seat15 d=\"M146.4 60.7h121.4V182H146.4z\" id=\"seat-15\"/>\n      <path ref:seat16 d=\"M293 60.7h121.3V182H293z\" id=\"seat-16\"/>\n      <path ref:seat17 d=\"M439.3 0h121.4v121.4H439.3z\" id=\"seat-17\"/>\n      <path ref:seat18 d=\"M585.7 60.7H707V182H585.8z\" id=\"seat-18\"/>\n      <path ref:seat31 d=\"M585.7 793H707v121.3H585.8z\" id=\"seat-31\"/>\n      <path ref:seat32 d=\"M732 793h121.5v121.3H732z\" id=\"seat-32\"/>\n      <path ref:seat28 d=\"M585.7 646.4H707v121.4H585.8z\" id=\"seat-28\"/>\n      <path ref:seat25 d=\"M585.7 500H707v121.4H585.8z\" id=\"seat-25\"/>\n      <path ref:seat22 d=\"M585.7 353.6H707V475H585.8z\" id=\"seat-22\"/>\n      <path ref:seat20 d=\"M585.7 207H707v121.5H585.8z\" id=\"seat-20\"/>\n      <path ref:seat29 d=\"M732 646.4h121.5v121.4H732z\" id=\"seat-29\"/>\n      <path ref:seat26 d=\"M732 500h121.5v121.4H732z\" id=\"seat-26\"/>\n      <path ref:seat23 d=\"M732 353.6h121.5V475H732z\" id=\"seat-23\"/>\n      <path ref:seat21 d=\"M732 207h121.5v121.5H732z\" id=\"seat-21\"/>\n      <path ref:seat19 d=\"M732 60.7h121.5V182H732z\" id=\"seat-19\"/>\n      <path ref:seat33 d=\"M878.6 793H1000v121.3H878.6z\" id=\"seat-33\"/>\n      <path ref:seat30 d=\"M878.6 646.4H1000v121.4H878.6z\" id=\"seat-30\"/>\n      <path ref:seat27 d=\"M878.6 500H1000v121.4H878.6z\" id=\"seat-27\"/>\n      <path ref:seat24 d=\"M878.6 353.6H1000V475H878.6z\" id=\"seat-24\"/>\n    </svg>\n  </div>\n  <span class=\"turnout sans-light\">{{councillorsElected}}/33 councillors elected. {{ councilTurnout * 100 }}% turnout.</span>\n</div>\n\n<style>\n  .results-graphic {\n    text-align: center;\n  }\n  .svg-wrapper {\n    width: 60%;\n    margin: 0 auto;\n  }\n</style>\n\n<script>\n  export default {\n    oncreate () {\n      this.observe('councilSeatArray', councilSeatArray => {\n        councilSeatArray.forEach((seatColor, index) => {\n          const seatNumber = index + 1;\n          const constructedRef = 'seat' + seatNumber;\n          const seatElement = this.refs[constructedRef];\n          if (seatElement) {\n            seatElement.style.fill = seatColor;\n          }\n        });\n      });\n    },\n  }\n</script>\n","<table>\n  <thead>\n    <th>Candidate</th>\n    <th>Faction</th>\n    <th>Ticket</th>\n    <th>Votes</th>\n    <th>Elected</th>\n  </thead>\n  {{#each councilTableData as row }}\n    <tr>\n        <td class=\"candidate-name\" style=\"background-color:{{row.factionColor}};\">{{row.candidate}}</td>\n        <td>{{row.faction}}</td>\n        <td>{{row.ticket}}</td>\n        <td>{{row.votes}}</td>\n        <td class=\"candidate-elected\" style=\"background-color:{{row.factionColor}};\">\n          <svg class=\"icon {{row.tickClass}}\" id=\"icon-checkmark\" viewBox=\"0 0 32 32\">\n            <path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\"></path>\n          </svg>\n        </td>\n    </tr>\n  {{/each}}\n</table>\n\n<style>\n\n</style>\n<script>\n  export default {\n    data () {\n      return {\n      }\n    },\n    computed: {\n      councilTableData: collatedResults => {\n        const colourAugmentedRowArray = collatedResults.council.map((object) => {\n          const augmentedCandidate = object;\n          if ('1'===augmentedCandidate.elected) {\n            const candidateFactionColor = collatedResults.colors[object.faction];\n            augmentedCandidate['factionColor'] = candidateFactionColor;\n            augmentedCandidate['tickClass'] = 'icon--show';\n          } else {\n            const candidateFactionColor = '';\n            augmentedCandidate['factionColor'] = candidateFactionColor;\n            augmentedCandidate['tickClass'] = '';\n          };\n          return augmentedCandidate;\n        });\n        const sortedRowArray = colourAugmentedRowArray.sort((a, b) => {\n          return Number(b.votes) - Number(a.votes);\n        })\n        return sortedRowArray;\n      },\n    },\n  }\n</script>\n","function fade ( node, ref ) {\n\tvar delay = ref.delay; if ( delay === void 0 ) delay = 0;\n\tvar duration = ref.duration; if ( duration === void 0 ) duration = 400;\n\n\tvar o = +getComputedStyle( node ).opacity;\n\n\treturn {\n\t\tdelay: delay,\n\t\tduration: duration,\n\t\tcss: function (t) { return (\"opacity: \" + (t * o)); }\n\t};\n}\n\nexport default fade;\n","function backInOut(t) {\n  var s = 1.70158 * 1.525;\n  if ((t *= 2) < 1)\n    return 0.5 * (t * t * ((s + 1) * t - s))\n  return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2)\n}\n\nfunction backIn(t) {\n  var s = 1.70158;\n  return t * t * ((s + 1) * t - s)\n}\n\nfunction backOut(t) {\n  var s = 1.70158;\n  return --t * t * ((s + 1) * t + s) + 1\n}\n\nfunction bounceOut(t) {\n  var a = 4.0 / 11.0;\n  var b = 8.0 / 11.0;\n  var c = 9.0 / 10.0;\n\n  var ca = 4356.0 / 361.0;\n  var cb = 35442.0 / 1805.0;\n  var cc = 16061.0 / 1805.0;\n\n  var t2 = t * t;\n\n  return t < a\n    ? 7.5625 * t2\n    : t < b\n      ? 9.075 * t2 - 9.9 * t + 3.4\n      : t < c\n        ? ca * t2 - cb * t + cc\n        : 10.8 * t * t - 20.52 * t + 10.72\n}\n\nfunction bounceInOut(t) {\n  return t < 0.5\n    ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n    : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5\n}\n\nfunction bounceIn(t) {\n  return 1.0 - bounceOut(1.0 - t)\n}\n\nfunction circInOut(t) {\n  if ((t *= 2) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1)\n  return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1)\n}\n\nfunction circIn(t) {\n  return 1.0 - Math.sqrt(1.0 - t * t)\n}\n\nfunction circOut(t) {\n  return Math.sqrt(1 - ( --t * t ))\n}\n\nfunction cubicInOut(t) {\n  return t < 0.5\n    ? 4.0 * t * t * t\n    : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0\n}\n\nfunction cubicIn(t) {\n  return t * t * t\n}\n\nfunction cubicOut(t) {\n  var f = t - 1.0;\n  return f * f * f + 1.0\n}\n\nfunction elasticInOut(t) {\n  return t < 0.5\n    ? 0.5 * Math.sin(+13.0 * Math.PI/2 * 2.0 * t) * Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n    : 0.5 * Math.sin(-13.0 * Math.PI/2 * ((2.0 * t - 1.0) + 1.0)) * Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) + 1.0\n}\n\nfunction elasticIn(t) {\n  return Math.sin(13.0 * t * Math.PI/2) * Math.pow(2.0, 10.0 * (t - 1.0))\n}\n\nfunction elasticOut(t) {\n  return Math.sin(-13.0 * (t + 1.0) * Math.PI/2) * Math.pow(2.0, -10.0 * t) + 1.0\n}\n\nfunction expoInOut(t) {\n  return (t === 0.0 || t === 1.0)\n    ? t\n    : t < 0.5\n      ? +0.5 * Math.pow(2.0, (20.0 * t) - 10.0)\n      : -0.5 * Math.pow(2.0, 10.0 - (t * 20.0)) + 1.0\n}\n\nfunction expoIn(t) {\n  return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0))\n}\n\nfunction expoOut(t) {\n  return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t)\n}\n\nfunction linear(t) {\n  return t\n}\n\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1) return 0.5*t*t\n    t--;\n    return -0.5 * (t*(t-2) - 1)\n}\n\nfunction quadIn(t) {\n  return t * t\n}\n\nfunction quadOut(t) {\n  return -t * (t - 2.0)\n}\n\nfunction quarticInOut(t) {\n  return t < 0.5\n    ? +8.0 * Math.pow(t, 4.0)\n    : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0\n}\n\nfunction quarticIn(t) {\n  return Math.pow(t, 4.0)\n}\n\nfunction quarticOut(t) {\n  return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0\n}\n\nfunction qinticInOut(t) {\n    if ( ( t *= 2 ) < 1 ) return 0.5 * t * t * t * t * t\n    return 0.5 * ( ( t -= 2 ) * t * t * t * t + 2 )\n}\n\nfunction qinticIn(t) {\n  return t * t * t * t * t\n}\n\nfunction qinticOut(t) {\n  return --t * t * t * t * t + 1\n}\n\nfunction sineInOut(t) {\n  return -0.5 * (Math.cos(Math.PI*t) - 1)\n}\n\nfunction sineIn (t) {\n  var v = Math.cos(t * Math.PI * 0.5);\n  if (Math.abs(v) < 1e-14) return 1\n  else return 1 - v\n}\n\nfunction sineOut(t) {\n  return Math.sin(t * Math.PI/2)\n}\n\nexport { backInOut, backIn, backOut, bounceInOut, bounceIn, bounceOut, circInOut, circIn, circOut, cubicInOut, cubicIn, cubicOut, elasticInOut, elasticIn, elasticOut, expoInOut, expoIn, expoOut, linear, quadInOut, quadIn, quadOut, quarticInOut as quartInOut, quarticIn as quartIn, quarticOut as quartOut, qinticInOut as quintInOut, qinticIn as quintIn, qinticOut as quintOut, sineInOut, sineIn, sineOut };\n","import { cubicOut } from 'eases-jsnext';\n\nfunction slide(\n\tnode,\n\tref\n) {\n\tvar delay = ref.delay; if ( delay === void 0 ) delay = 0;\n\tvar duration = ref.duration; if ( duration === void 0 ) duration = 400;\n\tvar easing = ref.easing; if ( easing === void 0 ) easing = cubicOut;\n\n\tvar style = getComputedStyle(node);\n\tvar opacity = +style.opacity;\n\tvar height = parseFloat(style.height);\n\tvar paddingTop = parseFloat(style.paddingTop);\n\tvar paddingBottom = parseFloat(style.paddingBottom);\n\tvar marginTop = parseFloat(style.marginTop);\n\tvar marginBottom = parseFloat(style.marginBottom);\n\tvar borderTopWidth = parseFloat(style.borderTopWidth);\n\tvar borderBottomWidth = parseFloat(style.borderBottomWidth);\n\n\treturn {\n\t\tdelay: delay,\n\t\tduration: duration,\n\t\teasing: easing,\n\t\tcss: function (t) { return \"overflow: hidden;\" +\n\t\t\t\"opacity: \" + (Math.min(t * 20, 1) * opacity) + \";\" +\n\t\t\t\"height: \" + (t * height) + \"px;\" +\n\t\t\t\"padding-top: \" + (t * paddingTop) + \"px;\" +\n\t\t\t\"padding-bottom: \" + (t * paddingBottom) + \"px;\" +\n\t\t\t\"margin-top: \" + (t * marginTop) + \"px;\" +\n\t\t\t\"margin-bottom: \" + (t * marginBottom) + \"px;\" +\n\t\t\t\"border-top-width: \" + (t * borderTopWidth) + \"px;\" +\n\t\t\t\"border-bottom-width: \" + (t * borderBottomWidth) + \"px;\"; }\n\t};\n}\n\nexport default slide;\n","<section class=\"results-section\">\n  <h2>Council</h2>\n\n  <CouncilBoxes\n    councilSeatArray='{{councilSeatArray}}'\n    councilTurnout='{{collatedResults.copy[0].councilturnout}}'\n    councillorsElected='{{councillorsElected}}'\n  />\n\n  <div class=\"analysis\">{{{collatedResults.copy[0].councilanalysis}}}</div>\n\n  <span ref:toggleText on:click='toggleTableDisplay(displayTable)' class=\"button\">+ Full results</span>\n  {{#if displayTable}}\n    <div transition:slide class=\"table-wrapper\">\n      <CouncilTable collatedResults='{{collatedResults}}'/>\n    </div>\n  {{/if}}\n</section>\n\n<style>\n</style>\n\n<script>\n  import CouncilBoxes from './CouncilBoxes.html';\n  import CouncilTable from './CouncilTable.html';\n  import { slide } from 'svelte-transitions';\n\n  export default {\n    components: {\n      CouncilBoxes,\n      CouncilTable,\n    },\n\n    computed: {\n      councilSeatArray: collatedResults => {\n        // Array of elected reps who are likely to be in the majority\n        const electedMajorityCouncillors = collatedResults.council.filter((councillor) => {\n          if ('1'===councillor.elected && '1'===councillor.inlikelymajority) {\n            return true;\n          }\n        });\n\n        // Array of elected reps likely to be in the minority\n        const electedMinorityCouncillors = collatedResults.council.filter((councillor) => {\n          if ('1'===councillor.elected && ''===councillor.inlikelymajority) {\n            return true;\n          }\n        });\n\n        // Array of zeroz for the unfilled seats\n        const emptySeats = 33 - Number(electedMinorityCouncillors.length) - Number(electedMajorityCouncillors.length);\n        const fillSeats = Array(emptySeats).fill(0);\n\n        const majorityAndEmpty = electedMajorityCouncillors.concat(fillSeats);\n        const allSeats = majorityAndEmpty.concat(electedMinorityCouncillors);\n\n        const councilSeatArray = allSeats.map((seat) => {\n          if (seat===0) {\n            return collatedResults.colors['Blank'];\n          } else {\n            return collatedResults.colors[seat.faction]\n          }\n        });\n\n        return councilSeatArray;\n      },\n      councillorsElected: collatedResults => {\n        const electedCouncillors = collatedResults.council.filter((councillor) => {\n          if ('1'===councillor.elected) {\n            return true;\n          }\n        });\n        return electedCouncillors.length;\n      },\n    },\n\n    data () {\n      return {\n        displayTable: false,\n      }\n    },\n\n    methods: {\n      toggleTableDisplay: function (displayTable) {\n        const toggleElement = this.refs.toggleText;\n        if (displayTable) {\n          this.set({displayTable:false});\n          toggleElement.textContent = '+ Full results';\n          this.fire('sendTheHeight');\n        } else {\n          this.set({displayTable:true})\n          toggleElement.textContent = '- Full results';\n          this.fire('sendTheHeight');\n        }\n      }\n    },\n\n    transitions: {\n      slide\n    },\n  }\n</script>\n","<div class=\"results-graphic\">\n  <div class=\"svg-wrapper\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer_1\" viewBox=\"0 0 1000 121.4\">\n      <path ref:seat7 d=\"M878.5 0h121.4v121.4H878.5z\" class=\"seat-7\"/>\n      <path ref:seat6 d=\"M732.1 0h121.4v121.4H732.1z\" class=\"seat-6\"/>\n      <path ref:seat5 d=\"M585.7 0h121.4v121.4H585.7z\" class=\"seat-5\"/>\n      <path ref:seat4 d=\"M439.3 0h121.4v121.4H439.3z\" class=\"seat-4\"/>\n      <path ref:seat3 d=\"M292.8 0h121.4v121.4H292.8z\" class=\"seat-3\"/>\n      <path ref:seat2 d=\"M146.4 0h121.4v121.4H146.4z\" class=\"seat-2\"/>\n      <path ref:seat1 d=\"M0 0h121.4v121.4H0z\" class=\"seat-1\"/>\n    </svg>\n  </div>\n  <span class=\"turnout sans-light\">{{numberOfElectedDelegates}}/7 delegates elected. {{ nusTurnout * 100 }}% turnout.</span>\n</div>\n\n\n<style>\n  .results-graphic {\n    text-align: center;\n  }\n  .svg-wrapper {\n    width: 60%;\n    margin: 0 auto;\n  }\n</style>\n\n<script>\n  export default {\n    oncreate () {\n      this.observe('nusSeatArray', nusSeatArray => {\n        nusSeatArray.forEach((seatColor, index) => {\n          const seatNumber = index + 1;\n          const constructedRef = 'seat' + seatNumber;\n          const seatElement = this.refs[constructedRef];\n          if (seatElement) {\n            seatElement.style.fill = seatColor;\n          }\n        });\n      });\n    },\n  }\n</script>\n","<table>\n  <thead>\n    <th>Candidate</th>\n    <th>Faction</th>\n    <th>Ticket</th>\n    <th>Votes</th>\n    <th>Elected</th>\n  </thead>\n  {{#each nusTableData as row }}\n    <tr>\n        <td class=\"candidate-name\" style=\"background-color:{{row.factionColor}};\">{{row.candidate}}</td>\n        <td>{{row.faction}}</td>\n        <td>{{row.ticket}}</td>\n        <td>{{row.votes}}</td>\n        <td class=\"candidate-elected\" style=\"background-color:{{row.factionColor}};\">\n          <svg class=\"icon {{row.tickClass}}\" id=\"icon-checkmark\" viewBox=\"0 0 32 32\">\n            <path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\"></path>\n          </svg>\n        </td>\n    </tr>\n  {{/each}}\n</table>\n\n<style>\n  table {\n    width: 100%;\n  }\n</style>\n<script>\n  export default {\n    data () {\n      return {\n\n      }\n    },\n    computed: {\n      nusTableData: collatedResults => {\n        const colourAugmentedRowArray = collatedResults.nus.map((object) => {\n          const augmentedCandidate = object;\n          if ('1'===augmentedCandidate.elected) {\n            const candidateFactionColor = collatedResults.colors[object.faction];\n            augmentedCandidate['factionColor'] = candidateFactionColor;\n            augmentedCandidate['tickClass'] = 'icon--show';\n          } else {\n            const candidateFactionColor = '';\n            augmentedCandidate['factionColor'] = candidateFactionColor;\n            augmentedCandidate['tickClass'] = '';\n          };\n          return augmentedCandidate;\n        });\n        const sortedRowArray = colourAugmentedRowArray.sort((a, b) => {\n          return Number(b.votes) - Number(a.votes);\n        })\n        return sortedRowArray;\n      },\n    },\n  }\n</script>\n","<section class=\"results-section\">\n  <h2>NUS</h2>\n\n  <NUSBoxes\n    nusSeatArray='{{nusSeatArray}}'\n    nusTurnout='{{collatedResults.copy[0].nusturnout}}'\n    numberOfElectedDelegates='{{numberOfElectedDelegates}}'\n  />\n\n  <div class=\"analysis\">{{{collatedResults.copy[0].nusanalysis}}}</div>\n\n  <span ref:toggleText on:click='toggleTableDisplay(displayTable)' class=\"button\">+ Full results</span>\n  {{#if displayTable}}\n    <div transition:slide class=\"table-wrapper\">\n      <NUSTable collatedResults='{{collatedResults}}'/>\n    </div>\n  {{/if}}\n</section>\n\n<style>\n</style>\n\n<script>\n  import NUSBoxes from './NUSBoxes.html';\n  import NUSTable from './NUSTable.html';\n  import { slide } from 'svelte-transitions';\n\n  export default {\n    components: {\n      NUSBoxes,\n      NUSTable,\n    },\n\n    computed: {\n      tableData: collatedResults => {\n        // Crunch the data down into an array of arrays for easy display\n        return collatedResults;\n      },\n\n      electedDelegates: collatedResults => {\n        const electedDelegates = collatedResults.nus.filter(candidate => {\n          return candidate.elected==='1';\n        });\n        return electedDelegates;\n      },\n\n      numberOfElectedDelegates: electedDelegates => {\n        return electedDelegates.length;\n      },\n\n      nusSeatArray: (collatedResults, electedDelegates) => {\n        const numberOfEmptySeats = 7 - electedDelegates.length;\n        const fillSeats = Array(numberOfEmptySeats).fill(0);\n        const allSeats = electedDelegates.concat(fillSeats);\n        const nusSeatArray = allSeats.map((seat) => {\n          if (seat===0) {\n            return collatedResults.colors['Blank'];\n          } else {\n            return collatedResults.colors[seat.faction]\n          }\n        });\n        return nusSeatArray;\n      }\n    },\n\n    data () {\n      return {\n        displayTable: false,\n      }\n    },\n\n    methods: {\n      toggleTableDisplay: function (displayTable) {\n        const toggleElement = this.refs.toggleText;\n        if (displayTable) {\n          this.set({displayTable:false});\n          toggleElement.textContent = '+ Full results';\n          this.fire('sendTheHeight');\n        } else {\n          this.set({displayTable:true})\n          toggleElement.textContent = '- Full results';\n          this.fire('sendTheHeight');\n        }\n      }\n    },\n\n    transitions: {\n      slide\n    },\n  }\n</script>\n","<div class=\"results-graphic\">\n  <table>\n    <thead>\n      <th>Candidate</th>\n      <th>Faction</th>\n      <th>Votes</th>\n      <th>Pct.</th>\n    </thead>\n    {{#each presSummary as presCandidate}}\n      <tr>\n        <td class=\"candidate-name\">{{presCandidate.candidate}}</td>\n        <td>{{presCandidate.faction}}</td>\n        <td>{{presCandidate.votes}}</td>\n        <td class=\"candidate-percent\">{{presCandidate.percent}}%</td>\n        <td class=\"bar-wrapper\">\n          <span class=\"bar\"\n            style=\"width: {{presCandidate.barPercentage}}%; background-color: {{presCandidate.color}}\">\n          </span>\n        </td>\n      </tr>\n    {{/each}}\n  </table>\n  <span class=\"turnout sans-light\">\n    {{collatedResults.copy[0].presboothscounted}}/{{collatedResults.copy[0].numberofbooths}} booths counted. {{ collatedResults.copy[0].presturnout * 100 }}% turnout.\n  </span>\n</div>\n\n<style>\n  table {\n    width: 100%;\n    font-size: 1rem;\n    border: 0px;\n  }\n\n  thead {\n    text-align: left;\n    font-size: 0.8rem;\n  }\n\n  th,\n  td {\n    padding: 0.3rem 0.3rem 0.3rem 0;\n    white-space: nowrap;\n  }\n\n  .candidate-percent {\n    font-weight: 700;\n  }\n\n  .candidate-name {\n    font-weight: 700;\n  }\n\n  .bar-wrapper {\n    display: table-cell;\n    width: 40%;\n  }\n\n  .bar {\n    display: block;\n    position: relative;\n    height: 16px;\n    border-radius: 2px;\n  }\n</style>\n\n<script>\n  export default {\n    computed: {\n      presSummary: collatedResults => {\n        const summaryObject = collatedResults.pres[10];\n        const presResultArray = [];\n\n        // Bella\n        const pytkaSummary = {};\n        pytkaSummary['candidate'] = 'Bella Pytka';\n        pytkaSummary['faction'] = 'SLS';\n        pytkaSummary['votes'] = Number(summaryObject.pytka);\n        pytkaSummary['percent'] = parseFloat((Number(summaryObject.pytkapercent) * 100).toFixed(2));\n        pytkaSummary['color'] = collatedResults.colors['SLS'];\n        presResultArray.push(pytkaSummary);\n\n        // Imogen\n        const grantSummary = {};\n        grantSummary['candidate'] = 'Imogen Grant';\n        grantSummary['faction'] = 'Switch';\n        grantSummary['votes'] = Number(summaryObject.grant);\n        grantSummary['percent'] = parseFloat((Number(summaryObject.grantpercent) * 100).toFixed(2));\n        grantSummary['color'] = collatedResults.colors['Grassroots'];\n        presResultArray.push(grantSummary);\n\n        // Brendan\n        const maSummary = {};\n        maSummary['candidate'] = 'Brendan Ma';\n        maSummary['faction'] = 'Mod Libs';\n        maSummary['votes'] = Number(summaryObject.ma);\n        maSummary['percent'] = parseFloat((Number(summaryObject.mapercent) * 100).toFixed(2));\n        maSummary['color'] = collatedResults.colors['Mod Libs'];\n        presResultArray.push(maSummary);\n\n        // Informal\n        const informalSummary = {};\n        informalSummary['candidate'] = 'Informal';\n        informalSummary['faction'] = '-';\n        informalSummary['votes'] = Number(summaryObject.informal);\n        informalSummary['percent'] = parseFloat((Number(summaryObject.informalpercent) * 100).toFixed(2));\n        informalSummary['color'] = collatedResults.colors['Blank'];\n        presResultArray.push(informalSummary);\n\n        // Sort the array by the highest vote count\n        presResultArray.sort((a, b) => {\n          return b.votes - a.votes;\n        });\n\n        // Add the bar percentage\n        presResultArray.map(candidateSummary => {\n          const barPercentage = (candidateSummary.votes / presResultArray[0].votes) * 100;\n          candidateSummary['barPercentage'] = barPercentage;\n          return candidateSummary;\n        })\n\n        return presResultArray;\n      },\n    },\n  }\n</script>\n","<table>\n  <thead>\n    <th>Booth</th>\n    <th>Grant</th>\n    <th>%</th>\n    <th>Pytka</th>\n    <th>%</th>\n    <th>Ma</th>\n    <th>%</th>\n    <th>Informal</th>\n    <th>%</th>\n    <th>Total</th>\n  </thead>\n  {{#each presTableData as row }}\n    <tr>\n        <td>{{row.booth}}</td>\n        <td>{{row.grant}}</td>\n        <td>{{row.grantpercent}}</td>\n        <td>{{row.pytka}}</td>\n        <td>{{row.pytkapercent}}</td>\n        <td>{{row.ma}}</td>\n        <td>{{row.mapercent}}</td>\n        <td>{{row.informal}}</td>\n        <td>{{row.informalpercent}}</td>\n        <td>{{row.total}}</td>\n    </tr>\n  {{/each}}\n</table>\n\n<style>\n</style>\n<script>\n  export default {\n    data () {\n      return {\n\n      }\n    },\n    computed: {\n      presTableData: collatedResults => collatedResults.pres\n    },\n  }\n</script>\n","<section class=\"results-section\">\n  <h2>President</h2>\n\n  <PresidentBars collatedResults='{{collatedResults}}'/>\n\n  <div class=\"analysis\">{{{collatedResults.copy[0].presanalysis}}}</div>\n\n  <span ref:toggleText on:click='toggleTableDisplay(displayTable)' class=\"button\">+ Full results</span>\n  {{#if displayTable}}\n    <div transition:slide class=\"table-wrapper\">\n      <PresidentTable collatedResults='{{collatedResults}}'/>\n    </div>\n  {{/if}}\n</section>\n\n<style>\n</style>\n\n<script>\n  import PresidentBars from './PresidentBars.html';\n  import PresidentTable from './PresidentTable.html';\n  import { slide } from 'svelte-transitions';\n\n\n  export default {\n    components: {\n      PresidentBars,\n      PresidentTable,\n    },\n\n    data () {\n      return {\n        displayTable: false,\n      }\n    },\n\n    methods: {\n      toggleTableDisplay: function (displayTable) {\n        const toggleElement = this.refs.toggleText;\n        if (displayTable) {\n          this.set({displayTable:false});\n          toggleElement.textContent = '+ Full results';\n          this.fire('sendTheHeight');\n        } else {\n          this.set({displayTable:true})\n          toggleElement.textContent = '- full results';\n          this.fire('sendTheHeight');\n        }\n      }\n    },\n\n    transitions: {\n      slide\n    },\n  }\n</script>\n","<div class=\"results-graphic\">\n  <div class=\"details\">\n    <div class=\"details--left\">\n      <span class=\"name\" style=\"color:{{mintColor}}\">Mint</span>\n      <h2 class=\"percentage\" style=\"color:{{mintColor}}\">{{ mintPercentageText }}%</h2>\n      <span class=\"total sans-light\">{{ mintTotal }}</span>\n    </div>\n    <div class=\"details--right\">\n      <span class=\"name\" style=\"color:{{heatColor}}\">Heat</span>\n      <span class=\"total sans-light\">{{ heatTotal }}</span>\n      <h2 class=\"percentage\" style=\"color:{{heatColor}}\">{{ heatPercentage }}%</h2>\n    </div>\n  </div>\n  <div class=\"bars\">\n    <span class=\"heat-bar\" style=\"background-color:{{heatColor}}\"></span>\n    <span class=\"mint-bar\" style=\"width:{{mintPercentageBar}}%; background-color:{{mintColor}}\"></span>\n    <span class=\"middle-mark\"></span>\n  </div>\n  <span class=\"turnout sans-light\">{{honiBoothsCounted}}/{{numberOfBooths}} booths counted. {{ honiTurnout * 100 }}% turnout.</span>\n</div>\n\n<style>\n  .details {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n  }\n\n  .details--left {\n    text-align: left;\n  }\n  .details--right {\n    text-align: right;\n  }\n\n  .name {\n    font-weight: 700;\n    letter-spacing: 0.9;\n    font-size: 1.3rem;\n    line-height: 0.7;\n    text-transform: uppercase;\n    display: block;\n  }\n\n  .percentage {\n    margin: 0;\n    font-size: 2rem;\n    line-height: 1.2;\n    display: inline-block;\n  }\n\n  .total {\n    display: inline-block;\n    margin: 0;\n  }\n  .bars {\n    display: block;\n    position: relative;\n  }\n\n  .heat-bar {\n    position: absolute;\n    display: block;\n    right: 0;\n    top: 0;\n    height: 32px;\n    width: 100%;\n    margin: 0;\n  }\n\n  .mint-bar {\n    position: absolute;\n    display: block;\n    left: 0;\n    top: 0;\n    height: 32px;\n    margin: 0;\n  }\n\n  .middle-mark {\n    position: relative;\n    display: block;\n    background-color: #333;\n    height: 32px;\n    width: 2px;\n    margin: 0 auto;\n  }\n</style>\n<script>\n  export default {\n    computed: {\n      totalCountedVotes: (mintTotal, heatTotal) => {\n        return Number(mintTotal) + Number(heatTotal);\n      },\n      mintPercentage: (mintTotal, totalCountedVotes) => {\n        const mintPercentage = mintTotal / totalCountedVotes;\n        return mintPercentage.toFixed(2) * 100;\n      },\n      mintPercentageText: mintPercentage => {\n        if (isNaN(mintPercentage)) {\n          return \"-\";\n        } else {\n          return mintPercentage;\n        }\n      },\n      mintPercentageBar: mintPercentage => {\n        if(isNaN(mintPercentage)) {\n          return \"50\";\n        } else {\n          return mintPercentage;\n        }\n      },\n      heatPercentage: (heatTotal, totalCountedVotes) => {\n        const heatPercentage = heatTotal / totalCountedVotes;\n        if (isNaN(heatPercentage)) {\n          return \"-\";\n        } else {\n          return heatPercentage.toFixed(2) * 100;\n        }\n      }\n    }\n  }\n</script>\n","<table>\n  <thead>\n    <th>Booth</th>\n    <th>Heat</th>\n    <th>%</th>\n    <th>Mint</th>\n    <th>%</th>\n    <th>Informal</th>\n    <th>%</th>\n    <th>Total</th>\n  </thead>\n  {{#each honiTableData as row }}\n    <tr>\n        <td>{{row.booth}}</td>\n        <td>{{row.heat}}</td>\n        <td>{{row.heatpercent}}</td>\n        <td>{{row.mint}}</td>\n        <td>{{row.mintpercent}}</td>\n        <td>{{row.informal}}</td>\n        <td>{{row.informalpercent}}</td>\n        <td>{{row.total}}</td>\n    </tr>\n  {{/each}}\n</table>\n\n<style>\n  \n</style>\n<script>\n  export default {\n    data () {\n      return {\n\n      }\n    },\n    computed: {\n      honiTableData: collatedResults => collatedResults.honi\n    },\n  }\n</script>\n","<section class=\"results-section\">\n  <h2>Honi Soit</h2>\n\n  <HoniBars\n    mintTotal='{{mintTotal}}'\n    heatTotal='{{heatTotal}}'\n    mintColor='{{collatedResults.colors[\"Mint\"]}}'\n    heatColor='{{collatedResults.colors[\"Heat\"]}}'\n    numberOfBooths='{{collatedResults.copy[0].numberofbooths}}'\n    honiBoothsCounted='{{collatedResults.copy[0].honiboothscounted}}'\n    honiTurnout='{{collatedResults.copy[0].honiturnout}}'\n  />\n\n  <div class=\"analysis\">{{{collatedResults.copy[0].honianalysis}}}</div>\n\n  <span ref:toggleText on:click='toggleTableDisplay(displayTable)' class=\"button\">+ Full results</span>\n  {{#if displayTable}}\n    <div transition:slide class=\"table-wrapper\">\n      <HoniTable tableData='{{tableData}}' collatedResults='{{collatedResults}}'/>\n    </div>\n  {{/if}}\n</section>\n\n<style>\n</style>\n\n<script>\n  import HoniBars from './HoniBars.html';\n  import HoniTable from './HoniTable.html';\n  import { slide } from 'svelte-transitions';\n\n  export default {\n    components: {\n      HoniBars,\n      HoniTable,\n    },\n\n    computed: {\n      tableData: collatedResults => {\n        const rowArray = collatedResults.honi.map(row => {\n          const cellArray = Object.keys(row).map(key => row[key]);\n          return cellArray;\n        });\n        return rowArray;\n      },\n      mintTotal: collatedResults => {\n        return collatedResults.honi[10].mint;\n      },\n      heatTotal: collatedResults => {\n        return collatedResults.honi[10].heat;\n      }\n    },\n\n    data () {\n      return {\n        displayTable: false,\n      }\n    },\n\n    methods: {\n      toggleTableDisplay: function (displayTable) {\n        const toggleElement = this.refs.toggleText;\n        if (displayTable) {\n          this.set({displayTable:false});\n          toggleElement.textContent = '+ Full results';\n          this.fire('sendTheHeight');\n        } else {\n          this.set({displayTable:true})\n          toggleElement.textContent = '- Full results';\n          this.fire('sendTheHeight');\n        }\n      }\n    },\n\n    transitions: {\n      slide\n    },\n  }\n</script>\n","<section class=\"results-container\">\n  <President\n    collatedResults='{{collatedResults}}'\n    on:sendTheHeight='extraFire()'\n  />\n  <Honi\n    collatedResults='{{collatedResults}}'\n    on:sendTheHeight='extraFire()'\n  />\n  <Council\n    collatedResults='{{collatedResults}}'\n    on:sendTheHeight='extraFire()'\n  />\n  <NUS\n    collatedResults='{{collatedResults}}'\n    on:sendTheHeight='extraFire()'\n  />\n</section>\n\n<style>\n</style>\n\n<script>\n  import Council from './Council.html';\n  import NUS from './NUS.html';\n  import President from './President.html';\n  import Honi from './Honi.html';\n\n  export default {\n    components: {\n      Council,\n      NUS,\n      President,\n      Honi,\n    },\n\n    methods: {\n      extraFire: function () {\n        this.fire('sendTheHeight');\n      }\n    }\n  }\n</script>\n","<section class=\"blog-container\">\n  <div class=\"flex-wrapper\">\n    <h2 class=\"blog-heading\">{{ blogData.copy[0].blogtitle }}</h2>\n    <div class=\"stream-container\">\n      {{#each visiblePosts as post @body}}\n        {{#if '1'===post.highlight}}\n          <span class=\"highlight-bar\"></span>\n        {{/if}}\n        <article class=\"blogPost\" transition:fade>\n          <h3 class=\"blogPost-heading\">{{post.heading}}</h3>\n          <p class=\"sans-light\">{{post.meta}}</p>\n          {{{post.body}}}\n        </article>\n      {{/each}}\n      {{#if loadMoreButtonVisible}}\n        <span class=\"button load-more\" on:click='loadMorePosts(visiblePosts, publishedPosts)'>Load more posts</span>\n      {{/if}}\n    </div>\n  </div>\n</section>\n\n<style>\n  .blog-heading {\n    margin-bottom: 0.5rem;\n  }\n  .flex-wrapper {\n    display: flex;\n    flex-direction: column;\n  }\n  .highlight-bar {\n    height: 2px;\n    width: 100%;\n    display: block;\n    position: relative;\n    background-color: red;\n    margin: 0;\n    padding: 0;\n  }\n  .stream-container {\n    overflow-y: scroll;\n    height: 50rem;\n    border-style: solid;\n    border-color: #eee;\n    border-width: 1px 0;\n    align-self: stretch;\n  }\n  .blogPost {\n    background-color: white;\n    margin: 0 0 1rem;\n    padding: 1rem;\n    border: 1px solid #eee;\n  }\n  .blogPost-heading {\n    margin-bottom: 0;\n    padding: 0;\n  }\n  .highlight {\n    background-color: red;\n  }\n  .load-more {\n    text-align: center;\n  }\n</style>\n\n<script>\n  /*\n   * TODO:\n   * Add transitions for the blog posts\n   * Make sure it doesn't remove the oldest of the 20 when a new one comes in live\n   * Test all permutations of what happens when there is no or incorrect spreadsheet content\n   */\n\n  import { fade } from 'svelte-transitions';\n\n  export default {\n    computed: {\n      publishedPosts: blogData => {\n        const withoutUnpublished = blogData.blog.filter((post) => {\n          return '1' === post.published;\n        });\n        const reverseOrder = withoutUnpublished.reverse();\n        return reverseOrder;\n      },\n      // I wonder if this will reduce the number back to twenty on every update\n      // I.e. when we receive an update do we want to check the number of visiblePosts\n      // and do make visible that number + 1 ??\n      visiblePosts: publishedPosts => {\n        // return the most recent 20 posts\n        return publishedPosts.slice(0, 20);\n      },\n      loadMoreButtonVisible: (publishedPosts, visiblePosts) => {\n        return visiblePosts.length == publishedPosts.length ? false : true;\n      }\n    },\n\n    methods: {\n      // SOMETHING HERE IS AN INDEX OFF BY ONE, LOADED POSTS ARE WEIRD\n      loadMorePosts(visiblePosts, publishedPosts) {\n        const newNumberOfPosts = visiblePosts.length + 10;\n        const morePosts = publishedPosts.slice(0, newNumberOfPosts);\n        this.set({ visiblePosts: morePosts });\n        this.fire('sendTheHeight');\n      },\n    },\n\n    transitions: {\n      fade,\n    },\n  }\n</script>\n","<nav>\n  <div class=\"select\">\n    <input type=\"radio\" name=\"select__option\" class=\"select__option\" id=\"select-results\" checked>\n    <input type=\"radio\" name=\"select__option\" class=\"select__option\" id=\"select-analysis\">\n    <label for=\"select-results\" class=\"select__label\" id=\"select__label--results\" on:click='toggleTab(\"results\")'>Results</label>\n    <label for=\"select-analysis\" class=\"select__label\" id=\"select__label--analysis\" on:click='toggleTab(\"analysis\", currentPane)'>Analysis</label>\n    <div class=\"select__slider\"></div>\n  </div>\n</nav>\n{{#if 'results'===currentPane}}\n  <Results\n    collatedResults='{{collatedResults}}'\n    on:sendTheHeight='extraFire()'\n  />\n{{else}}\n  <Blog\n    blogData='{{blogData}}'\n    on:sendTheHeight='extraFire()'\n  />\n{{/if}}\n\n<style>\nnav {\n  margin: 0 auto 1rem;\n  display: flex;\n}\n\n.select {\n  position: relative;\n  padding: 0;\n  margin: 0 auto;\n  border: 1px solid black;\n  overflow: hidden;\n  text-align: center;\n}\n\n.select > * {\n  float: left;\n}\n\n.select__option {\n  position: absolute;\n  visibility: hidden;\n  display: none;\n  margin: 0;\n  text-align: center;\n}\n\n.select__label {\n  width: 5rem;\n  display: inline-block;\n  font-family: \"Roboto\", Helvetica, sans-serif;\n  font-weight: 700;\n  font-size: 1rem;\n  text-transform: uppercase;\n  padding: 0.5rem 1rem;\n  margin: 0;\n  z-index: 10;\n}\n\n.select__slider {\n  width: 7rem;\n  height: 38px;\n  position: absolute;\n  top: 0px;\n  -webkit-transition: all .4s ease;\n  -moz-transition: all .4s ease;\n  -o-transition: all .4s ease;\n  -ms-transition: all .4s ease;\n  transition: all .4s ease;\n  background-color: rgba(55,55,55,0.1);\n  z-index: 1;\n}\n\n#select-results:checked ~ .select__slider {\n  left: 0;\n}\n#select-analysis:checked ~ .select__slider {\n  left: 7rem;\n}\n</style>\n\n<script>\n  import Results from './Results.html';\n  import Blog from './Blog.html';\n\n  export default {\n    components: {\n      Blog,\n      Results,\n    },\n\n    methods: {\n      toggleTab: function (paneToShow) {\n        this.set({currentPane: paneToShow});\n        this.fire('sendTheHeight');\n      },\n      extraFire: function () {\n        this.fire('sendTheHeight');\n      }\n    },\n  }\n</script>\n","<footer>\n  <div class=\"sans-dark\">{{{footnotes}}}</div>\n</footer>\n\n<style>\n  footer {\n    border-top: 1px solid #eee;\n    margin: 0 1rem 1rem;\n    padding: 1rem;\n  }\n</style>\n","<header>\n  <svg ref:masthead xmlns=\"http://www.w3.org/2000/svg\" class=\"header-logo\" viewBox=\"0 0 297.2 72.8\"><path d=\"M23 72.6c-7.5 0-13.3-1.7-17.6-5C1.8 64.8 0 61.6 0 58c0-1.8.6-3.4 1.7-4.6 1-1.2 2.7-1.8 4.6-1.8 2.6 0 4.6 1.4 5.8 4 1.8 3.7 5.6 5.5 11.5 5.5 5 0 10-1 14.7-3.2 5-2.3 7.4-4.7 7.4-7.4 0-3.7-1.5-6-4.6-7.3-2.2-.8-6.5-1.3-13-1.4-5.2 0-9.7-1-13.8-3-5.4-2.3-8-5.8-8-10.4 0-5.7 3-11 9.2-15.7 6-4.8 12.7-7.2 20-7.2 2.8 0 6.3.7 10.6 2 5.3 1.6 8 3.5 8 5.7 0 1.5-.6 3-1.7 4-1.2 1.4-2.7 2-4.5 2-1.4 0-3.4-.2-6.2-.8-2.7-.6-4.8-1-6.2-1-3.8 0-7.4 1-10.8 2.8-3.5 1.8-5.3 3.8-5.3 6 0 1 .5 2 1.6 2.7 1 .7 2.6 1.2 4.7 1.5l11.2.6c6.4.5 11.6 2.3 15.4 5.5 4.2 3.5 6.3 8.4 6.3 14.6 0 7.5-4.3 13.2-13 17-6.7 3-14.2 4.6-22.7 4.6zM108.2 70.4c-1.6 0-3-.6-4.4-1.8-8.8-8.4-18.6-14.2-29.3-17.4l.5 14.2c0 1.7-.6 3-1.8 4.2-1.2 1.2-2.6 1.7-4.4 1.7-1.8 0-3.2-.6-4.4-1.7-1.2-1.2-1.8-2.6-1.8-4.2v-10c.2-4.3.2-7.6.2-9.8V10c0-1.8.7-3.5 1.8-5C66 3 68.2 2 70.8 2l11 .8c4 .5 7.6 1.5 10.5 3 12.5 6.3 18.8 14 18.8 23.5 0 3.8-1.2 7.2-3.8 10.2-2.6 3-6.6 5.4-11.8 7.5 7.8 4.3 13.6 8.8 17.6 13.3 1 1.2 1.5 2.5 1.5 4s-.6 3-1.8 4c-1.3 1.3-2.8 2-4.5 2zM80 15c-.2 0-2 0-5.2-.4V38h2c7 0 12.4-1 16-2.7 1.4-.8 2.8-1.8 4-3 1.2-1.3 2-2.2 2-3 0-3.2-2.2-6.4-6.4-9.4-4-3-8-4.5-12.4-5zM161.4 23c-2.6 0-4.6-1.4-6-4.2-.5-1.3-1-2-1.7-2.4-.4-.2-1.6-.3-3.5-.3-3.7 0-8 3-12.8 8.7-6.8 8-10.2 15.6-10.2 22.6 0 3.2 1 6 3.2 8.2 2 2.3 4.7 3.4 7.7 3.4s6-1 9-2.4l6.7-4.3c2.3-1.5 4-2.3 5.2-2.3 1.7 0 3.2.6 4.4 2 1 1 1.7 2.5 1.7 4 0 1.7-.7 3.2-2.2 4.5-8 6.8-16.3 10.2-24.7 10.2-6.5 0-12-2.4-16.6-7.2C117 59 115 53.5 115 47c0-9.7 4.2-19.8 12.8-30 7.3-8.7 14.8-13 22.4-13h3.5l2.8.5c1.3-1.3 2.8-2 4.7-2 3 0 4.8 1.8 5.5 5.3.5 2.5.7 5.3.7 8.6 0 1.5-.4 2.8-1.3 4-1 1.8-2.5 2.6-4.6 2.6zM202.4 21.7c-1.7 0-3-.7-4.2-2-.8-1-1.3-2-1.5-3.2-1-6.4-1.5-10-1.5-11 0-1.7.5-3 1.5-4s2.3-1.5 4-1.5c3.2 0 5 1.6 5.6 5 1 6.2 1.5 10 1.5 11.3 0 1.6-.5 3-1.5 4s-2.3 1.4-4 1.4zM239.4 70H222c-5.6 0-8.4-1.8-8.4-5.3 0-4 3-6 9.3-6h1.8v-39c-2.6 1.8-4.2 2.6-5 2.6-1.6 0-3-.6-4.3-1.8-1.2-1.2-1.8-2.5-1.8-4 0-1.7 1-3.4 3-5l5-3.7 5.4-4.3c2.3-1.6 4.4-2.4 6.5-2.4 2.6 0 4 1.7 4 5 0 3.4 0 8.3-.4 14.7s-.3 15.4-.3 27.2v10.6h3c1.6 0 3 .5 4.2 1.6 1 1 1.6 2.4 1.6 4 0 1.7-.6 3-1.7 4.2-1.5 1-3 1.5-4.6 1.5zM277.5 15.5L259 15c-2 0-5.5 0-10-.2-3.8-.3-5.8-2.2-5.8-5.7 0-1.5.6-3 1.8-4 1.2-1 2.6-1.6 4.3-1.6 3.7 0 9.3 0 16.7.3l16.7.3h8c1.7 0 3 .3 4.3 1 1.5.7 2.2 1.8 2.2 3.3 0 1.6-1 3.5-2.6 5.8l-4.4 5c-3.7 4-7.2 9.2-10.3 15.2-1 2-3.7 7.4-8 16.5-.6 1.2-1.8 4.5-3.7 10-1.5 4-3 7-4.5 9.4-1.2 1.8-2.8 2.6-5 2.6-1.5 0-3-.5-4.2-1.6-1.3-1-2-2.4-2-4 0-1.4 1-4.3 3-9 3.3-7.3 6.4-14.7 9.6-22 3.8-8.5 8-15.4 12.3-20.5z\"/></svg>\n  {{#if '1'===indicateLive}}\n    <div class=\"live-indicator\">\n      <span class=\"live-dot\"></span>\n      <span class=\"live-time\">Live</span>\n    </div>\n  {{/if}}\n  <div class=\"standfirst\">{{{headerStandfirst}}}</div>\n</header>\n\n<style>\n  header {\n    display: block;\n    margin: 1rem auto;\n    width: 100%;\n  }\n\n  @media (min-width: 500px) {\n    header {\n      width: 40%;\n    }\n  }\n\n  @media (min-width: 900px) {\n    header {\n      width: 30%;\n    }\n  }\n\n  .header-logo {\n    display: block;\n    width: 100%;\n    margin: 0 0 1rem;\n    transition: all 1s ease;\n    fill: rgba(51, 51, 51, 1);\n  }\n\n  .live-indicator {\n    display: table;\n    position: relative;\n    margin: 0 auto 1rem;\n  }\n\n  .live-time {\n    color: red;\n    text-transform: uppercase;\n    margin: 0 auto 1rem;\n    padding-left: 1rem;\n  }\n\n  .live-dot {\n      width: 12px;\n      height: 12px;\n      border-radius: 50%;\n      position: absolute;\n      top: 4px;\n      left: 0;\n      animation: pulse 2s infinite;\n      animation-timing-function: ease;\n  }\n\n  @keyframes pulse {\n    0% {\n      background-color: rgba(255, 50, 50, 1);\n    }\n    50% {\n      background-color: rgba(255, 50, 50, 0);\n    }\n    100% {\n      background-color: rgba(255, 50, 50, 1);\n    }\n  }\n</style>\n\n<script>\n  export default {\n    oncreate () {\n      this.observe('newData', (newData) => {\n        if (newData) {\n          const masthead = this.refs.masthead;\n          masthead.style.fill = 'rgba(255, 50, 50, 1)';\n          setTimeout(() => {\n            masthead.style.fill = 'rgba(51, 51, 51, 1)';\n          }, 1500);\n          this.set({'newData': false})\n        }\n      })\n    },\n  }\n</script>\n","<:Window bind:innerWidth='appWidth'/>\n\n{{#if !hasConnection}}\n\t<h1 class=\"loading\">Loading...</h1>\n{{else}}\n\t<Header\n\t\theaderStandfirst='{{collatedResults.copy[0].headerstandfirst}}'\n\t\tnewData='{{newData}}'\n\t\tindicateLive='{{collatedResults.copy[0].indicatelive}}'\n\t/>\n\t{{#if '1'===collatedResults.copy[0].displayresults}}\n\t\t{{#if appWidth < 900 }}\n\t\t\t<TabBar\n\t\t\t\tcurrentPane='results'\n\t\t\t\tcollatedResults='{{collatedResults}}'\n\t\t\t\tblogData='{{blogData}}'\n\t\t\t\ton:sendTheHeight='pymUpdateHeight()'\n\t\t\t/>\n\t\t{{else}}\n\t\t\t<article class=\"content-wrapper\">\n\t\t\t\t<Results\n\t\t\t\t\tcollatedResults='{{collatedResults}}'\n\t\t\t\t\ton:sendTheHeight='pymUpdateHeight()'\n\t\t\t\t/>\n\t\t\t\t<Blog\n\t\t\t\t\tblogData='{{blogData}}'\n\t\t\t\t\ton:sendTheHeight='pymUpdateHeight()'\n\t\t\t\t/>\n\t\t\t</article>\n\t\t{{/if}}\n\t{{else}}\n\t\t<div class=\"blog-only-wrapper\">\n\t\t\t<Blog\n\t\t\t\tblogData='{{blogData}}'\n\t\t\t\ton:sendTheHeight='pymUpdateHeight()'\n\t\t\t/>\n\t\t</div>\n\t{{/if}}\n\t<Footer footnotes='{{collatedResults.copy[0].footnotes}}'/>\n{{/if}}\n\n<style>\n\t.loading {\n\t\ttext-align: center;\n\t}\n</style>\n<script>\n\timport TabBar from './components/TabBar.html';\n\timport Footer from './components/Footer.html';\n\timport Blog from './components/Blog.html';\n\timport Header from './components/Header.html';\n\timport Results from './components/Results.html';\n\n\texport default {\n    components: {\n\t\t\tBlog,\n\t\t\tResults,\n\t\t\tHeader,\n\t\t\tTabBar,\n\t\t\tFooter,\n\t\t},\n\n\t\tmethods: {\n\t\t\tpymUpdateHeight: function() {\n\t\t\t\tthis.fire('sendTheHeight');\n\t\t\t}\n\t\t},\n\n\t\tcomputed: {\n\t\t\tcollatedResults: (results, colors) => {\n\t\t\t\tconst restructuredResults = {};\n\t\t\t\trestructuredResults['council'] = results.council;\n\t\t\t\trestructuredResults['honi'] = results.honi;\n\t\t\t\trestructuredResults['nus'] = results.nus;\n\t\t\t\trestructuredResults['pres'] = results.pres;\n\t\t\t\trestructuredResults['copy'] = results.copy;\n\t\t\t\trestructuredResults['colors'] = colors;\n\t\t\t\treturn restructuredResults;\n\t\t\t},\n\t\t\tblogData: results => {\n\t\t\t\tconst restructuredData = {};\n\t\t\t\trestructuredData['blog'] = results.blog;\n\t\t\t\trestructuredData['copy'] = results.copy;\n\t\t\t\treturn restructuredData;\n\t\t\t}\n\t\t}\n  };\n</script>\n","import App from './App.html';\nimport pym from 'pym.js';\n\n// Retirement: we import a .json file of the final data and pass it as data\n// so I can turn the streaming server off\nimport retirementData from './frozen-data.json';\n\n// Set up the responsive iframe\nconst pymChild = new pym.Child({ renderCallback: () => { console.log('pym!');}, polling: 500 });\npymChild.sendHeight();\n\n/*\n * Retirement: Now we are no longer live, static data is passed to the app\n */\nconst appData = {\n\tnewData: false,\n\thasConnection: true,\n\tcolors: {\n\t  \"Grassroots\": \"#81c784\",\n\t  \"Independent\": \"#fff176\",\n\t  \"Labor\": \"#e57373\",\n\t  \"Liberals\": \"#42a5f5\",\n\t  \"Mod Libs\": \"#4fc3f7\",\n\t  \"NLS\": \"#a1887f\",\n\t  \"SLS\": \"#ffb74d\",\n\t  \"Socialist Alternative\": \"#9575cd\",\n\t  \"Solidarity\": \"#f06292\",\n\t  \"Unity\": \"#7986cb\",\n\t  \"Mint\": \"#71d39d\",\n\t  \"Heat\": \"#ff4c3f\",\n\t  \"Blank\": \"#eeeeee\"\n\t},\n\tresults: retirementData,\n};\n\nwindow.app = new App({\n\ttarget: document.body,\n\t// Pass data from the static file in here when the app is retired\n\tdata: appData,\n});\n\nwindow.app.on('sendTheHeight', event => {\n\tpymChild.sendHeight();\n});\n","/*! pym.js - v1.3.1 - 2017-07-25 */\n/*\n* Pym.js is library that resizes an iframe based on the width of the parent and the resulting height of the child.\n* Check out the docs at http://blog.apps.npr.org/pym.js/ or the readme at README.md for usage.\n*/\n\n/** @module pym */\n(function(factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(factory);\n    }\n    else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = factory();\n    } else {\n        window.pym = factory.call(this);\n    }\n})(function() {\n    var MESSAGE_DELIMITER = 'xPYMx';\n\n    var lib = {};\n\n    /**\n    * Create and dispatch a custom pym event\n    *\n    * @method _raiseCustomEvent\n    * @inner\n    *\n    * @param {String} eventName\n    */\n   var _raiseCustomEvent = function(eventName) {\n     var event = document.createEvent('Event');\n     event.initEvent('pym:' + eventName, true, true);\n     document.dispatchEvent(event);\n   };\n\n    /**\n    * Generic function for parsing URL params.\n    * Via http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript\n    *\n    * @method _getParameterByName\n    * @inner\n    *\n    * @param {String} name The name of the paramter to get from the URL.\n    */\n    var _getParameterByName = function(name) {\n        var regex = new RegExp(\"[\\\\?&]\" + name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]') + '=([^&#]*)');\n        var results = regex.exec(location.search);\n\n        if (results === null) {\n            return '';\n        }\n\n        return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n    };\n\n    /**\n     * Check the message to make sure it comes from an acceptable xdomain.\n     * Defaults to '*' but can be overriden in config.\n     *\n     * @method _isSafeMessage\n     * @inner\n     *\n     * @param {Event} e The message event.\n     * @param {Object} settings Configuration.\n     */\n    var _isSafeMessage = function(e, settings) {\n        if (settings.xdomain !== '*') {\n            // If origin doesn't match our xdomain, return.\n            if (!e.origin.match(new RegExp(settings.xdomain + '$'))) { return; }\n        }\n\n        // Ignore events that do not carry string data #151\n        if (typeof e.data !== 'string') { return; }\n\n        return true;\n    };\n\n    /**\n     * Construct a message to send between frames.\n     *\n     * NB: We use string-building here because JSON message passing is\n     * not supported in all browsers.\n     *\n     * @method _makeMessage\n     * @inner\n     *\n     * @param {String} id The unique id of the message recipient.\n     * @param {String} messageType The type of message to send.\n     * @param {String} message The message to send.\n     */\n    var _makeMessage = function(id, messageType, message) {\n        var bits = ['pym', id, messageType, message];\n\n        return bits.join(MESSAGE_DELIMITER);\n    };\n\n    /**\n     * Construct a regex to validate and parse messages.\n     *\n     * @method _makeMessageRegex\n     * @inner\n     *\n     * @param {String} id The unique id of the message recipient.\n     */\n    var _makeMessageRegex = function(id) {\n        var bits = ['pym', id, '(\\\\S+)', '(.*)'];\n\n        return new RegExp('^' + bits.join(MESSAGE_DELIMITER) + '$');\n    };\n\n    /**\n    * Underscore implementation of getNow\n    *\n    * @method _getNow\n    * @inner\n    *\n    */\n    var _getNow = Date.now || function() {\n        return new Date().getTime();\n    };\n\n    /**\n    * Underscore implementation of throttle\n    *\n    * @method _throttle\n    * @inner\n    *\n    * @param {function} func Throttled function\n    * @param {number} wait Throttle wait time\n    * @param {object} options Throttle settings\n    */\n\n    var _throttle = function(func, wait, options) {\n        var context, args, result;\n        var timeout = null;\n        var previous = 0;\n        if (!options) {options = {};}\n        var later = function() {\n            previous = options.leading === false ? 0 : _getNow();\n            timeout = null;\n            result = func.apply(context, args);\n            if (!timeout) {context = args = null;}\n        };\n        return function() {\n            var now = _getNow();\n            if (!previous && options.leading === false) {previous = now;}\n            var remaining = wait - (now - previous);\n            context = this;\n            args = arguments;\n            if (remaining <= 0 || remaining > wait) {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                }\n                previous = now;\n                result = func.apply(context, args);\n                if (!timeout) {context = args = null;}\n            } else if (!timeout && options.trailing !== false) {\n                timeout = setTimeout(later, remaining);\n            }\n            return result;\n        };\n    };\n\n    /**\n     * Clean autoInit Instances: those that point to contentless iframes\n     * @method _cleanAutoInitInstances\n     * @inner\n     */\n    var _cleanAutoInitInstances = function() {\n        var length = lib.autoInitInstances.length;\n\n        // Loop backwards to avoid index issues\n        for (var idx = length - 1; idx >= 0; idx--) {\n            var instance = lib.autoInitInstances[idx];\n            // If instance has been removed or is contentless then remove it\n            if (instance.el.getElementsByTagName('iframe').length &&\n                instance.el.getElementsByTagName('iframe')[0].contentWindow) {\n                continue;\n            }\n            else {\n                // Remove the reference to the removed or orphan instance\n                lib.autoInitInstances.splice(idx,1);\n            }\n        }\n    };\n\n    /**\n     * Store auto initialized Pym instances for further reference\n     * @name module:pym#autoInitInstances\n     * @type Array\n     * @default []\n     */\n    lib.autoInitInstances = [];\n\n    /**\n     * Initialize Pym for elements on page that have data-pym attributes.\n     * Expose autoinit in case we need to call it from the outside\n     * @instance\n     * @method autoInit\n     * @param {Boolean} doNotRaiseEvents flag to avoid sending custom events\n     */\n    lib.autoInit = function(doNotRaiseEvents) {\n        var elements = document.querySelectorAll('[data-pym-src]:not([data-pym-auto-initialized])');\n        var length = elements.length;\n\n        // Clean stored instances in case needed\n        _cleanAutoInitInstances();\n        for (var idx = 0; idx < length; ++idx) {\n            var element = elements[idx];\n            /*\n            * Mark automatically-initialized elements so they are not\n            * re-initialized if the user includes pym.js more than once in the\n            * same document.\n            */\n            element.setAttribute('data-pym-auto-initialized', '');\n\n            // Ensure elements have an id\n            if (element.id === '') {\n                element.id = 'pym-' + idx + \"-\" + Math.random().toString(36).substr(2,5);\n            }\n\n            var src = element.getAttribute('data-pym-src');\n\n            // List of data attributes to configure the component\n            // structure: {'attribute name': 'type'}\n            var settings = {'xdomain': 'string', 'title': 'string', 'name': 'string', 'id': 'string',\n                            'sandbox': 'string', 'allowfullscreen': 'boolean',\n                            'parenturlparam': 'string', 'parenturlvalue': 'string',\n                            'optionalparams': 'boolean', 'trackscroll': 'boolean',\n                            'scrollwait': 'number'};\n\n            var config = {};\n\n            for (var attribute in settings) {\n                // via https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute#Notes\n               if (element.getAttribute('data-pym-'+attribute) !== null) {\n                  switch (settings[attribute]) {\n                    case 'boolean':\n                       config[attribute] = !(element.getAttribute('data-pym-'+attribute) === 'false'); // jshint ignore:line\n                       break;\n                    case 'string':\n                       config[attribute] = element.getAttribute('data-pym-'+attribute);\n                       break;\n                    case 'number':\n                        var n = Number(element.getAttribute('data-pym-'+attribute));\n                        if (!isNaN(n)) {\n                            config[attribute] = n;\n                        }\n                        break;\n                    default:\n                       console.err('unrecognized attribute type');\n                  }\n               }\n            }\n\n            // Store references to autoinitialized pym instances\n            var parent = new lib.Parent(element.id, src, config);\n            lib.autoInitInstances.push(parent);\n        }\n\n        // Fire customEvent\n        if (!doNotRaiseEvents) {\n            _raiseCustomEvent(\"pym-initialized\");\n        }\n        // Return stored autoinitalized pym instances\n        return lib.autoInitInstances;\n    };\n\n    /**\n     * The Parent half of a response iframe.\n     *\n     * @memberof module:pym\n     * @class Parent\n     * @param {String} id The id of the div into which the iframe will be rendered. sets {@link module:pym.Parent~id}\n     * @param {String} url The url of the iframe source. sets {@link module:pym.Parent~url}\n     * @param {Object} [config] Configuration for the parent instance. sets {@link module:pym.Parent~settings}\n     * @param {string} [config.xdomain='*'] - xdomain to validate messages received\n     * @param {string} [config.title] - if passed it will be assigned to the iframe title attribute\n     * @param {string} [config.name] - if passed it will be assigned to the iframe name attribute\n     * @param {string} [config.id] - if passed it will be assigned to the iframe id attribute\n     * @param {boolean} [config.allowfullscreen] - if passed and different than false it will be assigned to the iframe allowfullscreen attribute\n     * @param {string} [config.sandbox] - if passed it will be assigned to the iframe sandbox attribute (we do not validate the syntax so be careful!!)\n     * @param {string} [config.parenturlparam] - if passed it will be override the default parentUrl query string parameter name passed to the iframe src\n     * @param {string} [config.parenturlvalue] - if passed it will be override the default parentUrl query string parameter value passed to the iframe src\n     * @param {string} [config.optionalparams] - if passed and different than false it will strip the querystring params parentUrl and parentTitle passed to the iframe src\n     * @param {boolean} [config.trackscroll] - if passed it will activate scroll tracking on the parent\n     * @param {number} [config.scrollwait] - if passed it will set the throttle wait in order to fire scroll messaging. Defaults to 100 ms.\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe iFrame}\n     */\n    lib.Parent = function(id, url, config) {\n        /**\n         * The id of the container element\n         *\n         * @memberof module:pym.Parent\n         * @member {string} id\n         * @inner\n         */\n        this.id = id;\n        /**\n         * The url that will be set as the iframe's src\n         *\n         * @memberof module:pym.Parent\n         * @member {String} url\n         * @inner\n         */\n        this.url = url;\n\n        /**\n         * The container DOM object\n         *\n         * @memberof module:pym.Parent\n         * @member {HTMLElement} el\n         * @inner\n         */\n        this.el = document.getElementById(id);\n        /**\n         * The contained child iframe\n         *\n         * @memberof module:pym.Parent\n         * @member {HTMLElement} iframe\n         * @inner\n         * @default null\n         */\n        this.iframe = null;\n        /**\n         * The parent instance settings, updated by the values passed in the config object\n         *\n         * @memberof module:pym.Parent\n         * @member {Object} settings\n         * @inner\n         */\n        this.settings = {\n            xdomain: '*',\n            optionalparams: true,\n            parenturlparam: 'parentUrl',\n            parenturlvalue: window.location.href,\n            trackscroll: false,\n            scrollwait: 100,\n        };\n        /**\n         * RegularExpression to validate the received messages\n         *\n         * @memberof module:pym.Parent\n         * @member {String} messageRegex\n         * @inner\n         */\n        this.messageRegex = _makeMessageRegex(this.id);\n        /**\n         * Stores the registered messageHandlers for each messageType\n         *\n         * @memberof module:pym.Parent\n         * @member {Object} messageHandlers\n         * @inner\n         */\n        this.messageHandlers = {};\n\n        // ensure a config object\n        config = (config || {});\n\n        /**\n         * Construct the iframe.\n         *\n         * @memberof module:pym.Parent\n         * @method _constructIframe\n         * @inner\n         */\n        this._constructIframe = function() {\n            // Calculate the width of this element.\n            var width = this.el.offsetWidth.toString();\n\n            // Create an iframe element attached to the document.\n            this.iframe = document.createElement('iframe');\n\n            // Save fragment id\n            var hash = '';\n            var hashIndex = this.url.indexOf('#');\n\n            if (hashIndex > -1) {\n                hash = this.url.substring(hashIndex, this.url.length);\n                this.url = this.url.substring(0, hashIndex);\n            }\n\n            // If the URL contains querystring bits, use them.\n            // Otherwise, just create a set of valid params.\n            if (this.url.indexOf('?') < 0) {\n                this.url += '?';\n            } else {\n                this.url += '&';\n            }\n\n            // Append the initial width as a querystring parameter\n            // and optional params if configured to do so\n            this.iframe.src = this.url + 'initialWidth=' + width +\n                                         '&childId=' + this.id;\n\n            if (this.settings.optionalparams) {\n                this.iframe.src += '&parentTitle=' + encodeURIComponent(document.title);\n                this.iframe.src += '&'+ this.settings.parenturlparam + '=' + encodeURIComponent(this.settings.parenturlvalue);\n            }\n            this.iframe.src +=hash;\n\n            // Set some attributes to this proto-iframe.\n            this.iframe.setAttribute('width', '100%');\n            this.iframe.setAttribute('scrolling', 'no');\n            this.iframe.setAttribute('marginheight', '0');\n            this.iframe.setAttribute('frameborder', '0');\n\n            if (this.settings.title) {\n                this.iframe.setAttribute('title', this.settings.title);\n            }\n\n            if (this.settings.allowfullscreen !== undefined && this.settings.allowfullscreen !== false) {\n                this.iframe.setAttribute('allowfullscreen','');\n            }\n\n            if (this.settings.sandbox !== undefined && typeof this.settings.sandbox === 'string') {\n                this.iframe.setAttribute('sandbox', this.settings.sandbox);\n            }\n\n            if (this.settings.id) {\n                if (!document.getElementById(this.settings.id)) {\n                    this.iframe.setAttribute('id', this.settings.id);\n                }\n            }\n\n            if (this.settings.name) {\n                this.iframe.setAttribute('name', this.settings.name);\n            }\n\n            // Replace the child content if needed\n            // (some CMSs might strip out empty elements)\n            while(this.el.firstChild) { this.el.removeChild(this.el.firstChild); }\n            // Append the iframe to our element.\n            this.el.appendChild(this.iframe);\n\n            // Add an event listener that will handle redrawing the child on resize.\n            window.addEventListener('resize', this._onResize);\n\n            // Add an event listener that will send the child the viewport.\n            if (this.settings.trackscroll) {\n                window.addEventListener('scroll', this._throttleOnScroll);\n            }\n        };\n\n        /**\n         * Send width on resize.\n         *\n         * @memberof module:pym.Parent\n         * @method _onResize\n         * @inner\n         */\n        this._onResize = function() {\n            this.sendWidth();\n            if (this.settings.trackscroll) {\n                this.sendViewportAndIFramePosition();\n            }\n        }.bind(this);\n\n        /**\n         * Send viewport and iframe info on scroll.\n         *\n         * @memberof module:pym.Parent\n         * @method _onScroll\n         * @inner\n         */\n        this._onScroll = function() {\n            this.sendViewportAndIFramePosition();\n        }.bind(this);\n\n        /**\n         * Fire all event handlers for a given message type.\n         *\n         * @memberof module:pym.Parent\n         * @method _fire\n         * @inner\n         *\n         * @param {String} messageType The type of message.\n         * @param {String} message The message data.\n         */\n        this._fire = function(messageType, message) {\n            if (messageType in this.messageHandlers) {\n                for (var i = 0; i < this.messageHandlers[messageType].length; i++) {\n                   this.messageHandlers[messageType][i].call(this, message);\n                }\n            }\n        };\n\n        /**\n         * Remove this parent from the page and unbind it's event handlers.\n         *\n         * @memberof module:pym.Parent\n         * @method remove\n         * @instance\n         */\n        this.remove = function() {\n            window.removeEventListener('message', this._processMessage);\n            window.removeEventListener('resize', this._onResize);\n\n            this.el.removeChild(this.iframe);\n            // _cleanAutoInitInstances in case this parent was autoInitialized\n            _cleanAutoInitInstances();\n        };\n\n        /**\n         * Process a new message from the child.\n         *\n         * @memberof module:pym.Parent\n         * @method _processMessage\n         * @inner\n         *\n         * @param {Event} e A message event.\n         */\n        this._processMessage = function(e) {\n            // First, punt if this isn't from an acceptable xdomain.\n            if (!_isSafeMessage(e, this.settings)) {\n                return;\n            }\n\n            // Discard object messages, we only care about strings\n            if (typeof e.data !== 'string') {\n                return;\n            }\n\n            // Grab the message from the child and parse it.\n            var match = e.data.match(this.messageRegex);\n\n            // If there's no match or too many matches in the message, punt.\n            if (!match || match.length !== 3) {\n                return false;\n            }\n\n            var messageType = match[1];\n            var message = match[2];\n\n            this._fire(messageType, message);\n        }.bind(this);\n\n        /**\n         * Resize iframe in response to new height message from child.\n         *\n         * @memberof module:pym.Parent\n         * @method _onHeightMessage\n         * @inner\n         *\n         * @param {String} message The new height.\n         */\n        this._onHeightMessage = function(message) {\n            /*\n             * Handle parent height message from child.\n             */\n            var height = parseInt(message);\n\n            this.iframe.setAttribute('height', height + 'px');\n        };\n\n        /**\n         * Navigate parent to a new url.\n         *\n         * @memberof module:pym.Parent\n         * @method _onNavigateToMessage\n         * @inner\n         *\n         * @param {String} message The url to navigate to.\n         */\n        this._onNavigateToMessage = function(message) {\n            /*\n             * Handle parent scroll message from child.\n             */\n            document.location.href = message;\n        };\n\n        /**\n         * Scroll parent to a given child position.\n         *\n         * @memberof module:pym.Parent\n         * @method _onScrollToChildPosMessage\n         * @inner\n         *\n         * @param {String} message The offset inside the child page.\n         */\n        this._onScrollToChildPosMessage = function(message) {\n            // Get the child container position using getBoundingClientRect + pageYOffset\n            // via https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n            var iframePos = document.getElementById(this.id).getBoundingClientRect().top + window.pageYOffset;\n\n            var totalOffset = iframePos + parseInt(message);\n            window.scrollTo(0, totalOffset);\n        };\n\n        /**\n         * Bind a callback to a given messageType from the child.\n         *\n         * Reserved message names are: \"height\", \"scrollTo\" and \"navigateTo\".\n         *\n         * @memberof module:pym.Parent\n         * @method onMessage\n         * @instance\n         *\n         * @param {String} messageType The type of message being listened for.\n         * @param {module:pym.Parent~onMessageCallback} callback The callback to invoke when a message of the given type is received.\n         */\n        this.onMessage = function(messageType, callback) {\n            if (!(messageType in this.messageHandlers)) {\n                this.messageHandlers[messageType] = [];\n            }\n\n            this.messageHandlers[messageType].push(callback);\n        };\n\n        /**\n         * @callback module:pym.Parent~onMessageCallback\n         * @param {String} message The message data.\n         */\n\n        /**\n         * Send a message to the the child.\n         *\n         * @memberof module:pym.Parent\n         * @method sendMessage\n         * @instance\n         *\n         * @param {String} messageType The type of message to send.\n         * @param {String} message The message data to send.\n         */\n        this.sendMessage = function(messageType, message) {\n            // When used alongside with pjax some references are lost\n            if (this.el.getElementsByTagName('iframe').length) {\n                if (this.el.getElementsByTagName('iframe')[0].contentWindow) {\n                    this.el.getElementsByTagName('iframe')[0].contentWindow\n                        .postMessage(_makeMessage(this.id, messageType, message), '*');\n                }\n                else {\n                    // Contentless child detected remove listeners and iframe\n                    this.remove();\n                }\n            }\n        };\n\n        /**\n         * Transmit the current iframe width to the child.\n         *\n         * You shouldn't need to call this directly.\n         *\n         * @memberof module:pym.Parent\n         * @method sendWidth\n         * @instance\n         */\n        this.sendWidth = function() {\n            var width = this.el.offsetWidth.toString();\n            this.sendMessage('width', width);\n        };\n\n        /**\n         * Transmit the current viewport and iframe position to the child.\n         * Sends viewport width, viewport height\n         * and iframe bounding rect top-left-bottom-right\n         * all separated by spaces\n         *\n         * You shouldn't need to call this directly.\n         *\n         * @memberof module:pym.Parent\n         * @method sendViewportAndIFramePosition\n         * @instance\n         */\n        this.sendViewportAndIFramePosition = function() {\n            var iframeRect = this.iframe.getBoundingClientRect();\n            var vWidth   = window.innerWidth || document.documentElement.clientWidth;\n            var vHeight  = window.innerHeight || document.documentElement.clientHeight;\n            var payload = vWidth + ' ' + vHeight;\n            payload += ' ' + iframeRect.top + ' ' + iframeRect.left;\n            payload += ' ' + iframeRect.bottom + ' ' + iframeRect.right;\n            this.sendMessage('viewport-iframe-position', payload);\n        };\n\n        // Add any overrides to settings coming from config.\n        for (var key in config) {\n            this.settings[key] = config[key];\n        }\n\n        /**\n         * Throttled scroll function.\n         *\n         * @memberof module:pym.Parent\n         * @method _throttleOnScroll\n         * @inner\n         */\n        this._throttleOnScroll = _throttle(this._onScroll.bind(this), this.settings.scrollwait);\n\n        // Bind required message handlers\n        this.onMessage('height', this._onHeightMessage);\n        this.onMessage('navigateTo', this._onNavigateToMessage);\n        this.onMessage('scrollToChildPos', this._onScrollToChildPosMessage);\n        this.onMessage('parentPositionInfo', this.sendViewportAndIFramePosition);\n\n        // Add a listener for processing messages from the child.\n        window.addEventListener('message', this._processMessage, false);\n\n        // Construct the iframe in the container element.\n        this._constructIframe();\n\n        return this;\n    };\n\n    /**\n     * The Child half of a responsive iframe.\n     *\n     * @memberof module:pym\n     * @class Child\n     * @param {Object} [config] Configuration for the child instance. sets {@link module:pym.Child~settings}\n     * @param {function} [config.renderCallback=null] Callback invoked after receiving a resize event from the parent, sets {@link module:pym.Child#settings.renderCallback}\n     * @param {string} [config.xdomain='*'] - xdomain to validate messages received\n     * @param {number} [config.polling=0] - polling frequency in milliseconds to send height to parent\n     * @param {number} [config.id] - parent container id used when navigating the child iframe to a new page but we want to keep it responsive.\n     * @param {string} [config.parenturlparam] - if passed it will be override the default parentUrl query string parameter name expected on the iframe src\n     */\n    lib.Child = function(config) {\n        /**\n         * The initial width of the parent page\n         *\n         * @memberof module:pym.Child\n         * @member {string} parentWidth\n         * @inner\n         */\n        this.parentWidth = null;\n        /**\n         * The id of the parent container\n         *\n         * @memberof module:pym.Child\n         * @member {String} id\n         * @inner\n         */\n        this.id = null;\n        /**\n         * The title of the parent page from document.title.\n         *\n         * @memberof module:pym.Child\n         * @member {String} parentTitle\n         * @inner\n         */\n        this.parentTitle = null;\n        /**\n         * The URL of the parent page from window.location.href.\n         *\n         * @memberof module:pym.Child\n         * @member {String} parentUrl\n         * @inner\n         */\n        this.parentUrl = null;\n        /**\n         * The settings for the child instance. Can be overriden by passing a config object to the child constructor\n         * i.e.: var pymChild = new pym.Child({renderCallback: render, xdomain: \"\\\\*\\.npr\\.org\"})\n         *\n         * @memberof module:pym.Child.settings\n         * @member {Object} settings - default settings for the child instance\n         * @inner\n         */\n        this.settings = {\n            renderCallback: null,\n            xdomain: '*',\n            polling: 0,\n            parenturlparam: 'parentUrl'\n        };\n\n        /**\n         * The timerId in order to be able to stop when polling is enabled\n         *\n         * @memberof module:pym.Child\n         * @member {String} timerId\n         * @inner\n         */\n        this.timerId = null;\n        /**\n         * RegularExpression to validate the received messages\n         *\n         * @memberof module:pym.Child\n         * @member {String} messageRegex\n         * @inner\n         */\n        this.messageRegex = null;\n        /**\n         * Stores the registered messageHandlers for each messageType\n         *\n         * @memberof module:pym.Child\n         * @member {Object} messageHandlers\n         * @inner\n         */\n        this.messageHandlers = {};\n\n        // Ensure a config object\n        config = (config || {});\n\n        /**\n         * Bind a callback to a given messageType from the child.\n         *\n         * Reserved message names are: \"width\".\n         *\n         * @memberof module:pym.Child\n         * @method onMessage\n         * @instance\n         *\n         * @param {String} messageType The type of message being listened for.\n         * @param {module:pym.Child~onMessageCallback} callback The callback to invoke when a message of the given type is received.\n         */\n        this.onMessage = function(messageType, callback) {\n\n            if (!(messageType in this.messageHandlers)) {\n                this.messageHandlers[messageType] = [];\n            }\n\n            this.messageHandlers[messageType].push(callback);\n        };\n\n        /**\n         * @callback module:pym.Child~onMessageCallback\n         * @param {String} message The message data.\n         */\n\n\n        /**\n         * Fire all event handlers for a given message type.\n         *\n         * @memberof module:pym.Child\n         * @method _fire\n         * @inner\n         *\n         * @param {String} messageType The type of message.\n         * @param {String} message The message data.\n         */\n        this._fire = function(messageType, message) {\n            /*\n             * Fire all event handlers for a given message type.\n             */\n            if (messageType in this.messageHandlers) {\n                for (var i = 0; i < this.messageHandlers[messageType].length; i++) {\n                   this.messageHandlers[messageType][i].call(this, message);\n                }\n            }\n        };\n\n        /**\n         * Process a new message from the parent.\n         *\n         * @memberof module:pym.Child\n         * @method _processMessage\n         * @inner\n         *\n         * @param {Event} e A message event.\n         */\n        this._processMessage = function(e) {\n            /*\n            * Process a new message from parent frame.\n            */\n            // First, punt if this isn't from an acceptable xdomain.\n            if (!_isSafeMessage(e, this.settings)) {\n                return;\n            }\n\n            // Discard object messages, we only care about strings\n            if (typeof e.data !== 'string') {\n                return;\n            }\n\n            // Get the message from the parent.\n            var match = e.data.match(this.messageRegex);\n\n            // If there's no match or it's a bad format, punt.\n            if (!match || match.length !== 3) { return; }\n\n            var messageType = match[1];\n            var message = match[2];\n\n            this._fire(messageType, message);\n        }.bind(this);\n\n        /**\n         * Resize iframe in response to new width message from parent.\n         *\n         * @memberof module:pym.Child\n         * @method _onWidthMessage\n         * @inner\n         *\n         * @param {String} message The new width.\n         */\n        this._onWidthMessage = function(message) {\n            /*\n             * Handle width message from the child.\n             */\n            var width = parseInt(message);\n\n            // Change the width if it's different.\n            if (width !== this.parentWidth) {\n                this.parentWidth = width;\n\n                // Call the callback function if it exists.\n                if (this.settings.renderCallback) {\n                    this.settings.renderCallback(width);\n                }\n\n                // Send the height back to the parent.\n                this.sendHeight();\n            }\n        };\n\n        /**\n         * Send a message to the the Parent.\n         *\n         * @memberof module:pym.Child\n         * @method sendMessage\n         * @instance\n         *\n         * @param {String} messageType The type of message to send.\n         * @param {String} message The message data to send.\n         */\n        this.sendMessage = function(messageType, message) {\n            /*\n             * Send a message to the parent.\n             */\n            window.parent.postMessage(_makeMessage(this.id, messageType, message), '*');\n        };\n\n        /**\n         * Transmit the current iframe height to the parent.\n         *\n         * Call this directly in cases where you manually alter the height of the iframe contents.\n         *\n         * @memberof module:pym.Child\n         * @method sendHeight\n         * @instance\n         */\n        this.sendHeight = function() {\n            // Get the child's height.\n            var height = document.getElementsByTagName('body')[0].offsetHeight.toString();\n\n            // Send the height to the parent.\n            this.sendMessage('height', height);\n\n            return height;\n        }.bind(this);\n\n        /**\n         * Ask parent to send the current viewport and iframe position information\n         *\n         * @memberof module:pym.Child\n         * @method sendHeight\n         * @instance\n         */\n        this.getParentPositionInfo = function() {\n            // Send the height to the parent.\n            this.sendMessage('parentPositionInfo');\n        };\n\n        /**\n         * Scroll parent to a given element id.\n         *\n         * @memberof module:pym.Child\n         * @method scrollParentTo\n         * @instance\n         *\n         * @param {String} hash The id of the element to scroll to.\n         */\n        this.scrollParentTo = function(hash) {\n            this.sendMessage('navigateTo', '#' + hash);\n        };\n\n        /**\n         * Navigate parent to a given url.\n         *\n         * @memberof module:pym.Child\n         * @method navigateParentTo\n         * @instance\n         *\n         * @param {String} url The url to navigate to.\n         */\n        this.navigateParentTo = function(url) {\n            this.sendMessage('navigateTo', url);\n        };\n\n        /**\n         * Scroll parent to a given child element id.\n         *\n         * @memberof module:pym.Child\n         * @method scrollParentToChildEl\n         * @instance\n         *\n         * @param {String} id The id of the child element to scroll to.\n         */\n        this.scrollParentToChildEl = function(id) {\n            // Get the child element position using getBoundingClientRect + pageYOffset\n            // via https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n            var topPos = document.getElementById(id).getBoundingClientRect().top + window.pageYOffset;\n            this.scrollParentToChildPos(topPos);\n        };\n\n        /**\n         * Scroll parent to a particular child offset.\n         *\n         * @memberof module:pym.Child\n         * @method scrollParentToChildPos\n         * @instance\n         *\n         * @param {Number} pos The offset of the child element to scroll to.\n         */\n        this.scrollParentToChildPos = function(pos) {\n            this.sendMessage('scrollToChildPos', pos.toString());\n        };\n\n        /**\n         * Mark Whether the child is embedded or not\n         * executes a callback in case it was passed to the config\n         *\n         * @memberof module:pym.Child\n         * @method _markWhetherEmbedded\n         * @inner\n         *\n         * @param {module:pym.Child~onMarkedEmbeddedStatus} The callback to execute after determining whether embedded or not.\n         */\n        var _markWhetherEmbedded = function(onMarkedEmbeddedStatus) {\n          var htmlElement = document.getElementsByTagName('html')[0],\n              newClassForHtml,\n              originalHtmlClasses = htmlElement.className;\n          try {\n            if(window.self !== window.top) {\n              newClassForHtml = \"embedded\";\n            }else{\n              newClassForHtml = \"not-embedded\";\n            }\n          }catch(e) {\n            newClassForHtml = \"embedded\";\n          }\n          if(originalHtmlClasses.indexOf(newClassForHtml) < 0) {\n            htmlElement.className = originalHtmlClasses ? originalHtmlClasses + ' ' + newClassForHtml : newClassForHtml;\n            if(onMarkedEmbeddedStatus){\n              onMarkedEmbeddedStatus(newClassForHtml);\n            }\n            _raiseCustomEvent(\"marked-embedded\");\n          }\n        };\n\n        /**\n         * @callback module:pym.Child~onMarkedEmbeddedStatus\n         * @param {String} classname \"embedded\" or \"not-embedded\".\n         */\n\n        /**\n         * Unbind child event handlers and timers.\n         *\n         * @memberof module:pym.Child\n         * @method remove\n         * @instance\n         */\n        this.remove = function() {\n            window.removeEventListener('message', this._processMessage);\n            if (this.timerId) {\n                clearInterval(this.timerId);\n            }\n        };\n\n        // Initialize settings with overrides.\n        for (var key in config) {\n            this.settings[key] = config[key];\n        }\n\n        // Identify what ID the parent knows this child as.\n        this.id = _getParameterByName('childId') || config.id;\n        this.messageRegex = new RegExp('^pym' + MESSAGE_DELIMITER + this.id + MESSAGE_DELIMITER + '(\\\\S+)' + MESSAGE_DELIMITER + '(.*)$');\n\n        // Get the initial width from a URL parameter.\n        var width = parseInt(_getParameterByName('initialWidth'));\n\n        // Get the url of the parent frame\n        this.parentUrl = _getParameterByName(this.settings.parenturlparam);\n\n        // Get the title of the parent frame\n        this.parentTitle = _getParameterByName('parentTitle');\n\n        // Bind the required message handlers\n        this.onMessage('width', this._onWidthMessage);\n\n        // Set up a listener to handle any incoming messages.\n        window.addEventListener('message', this._processMessage, false);\n\n        // If there's a callback function, call it.\n        if (this.settings.renderCallback) {\n            this.settings.renderCallback(width);\n        }\n\n        // Send the initial height to the parent.\n        this.sendHeight();\n\n        // If we're configured to poll, create a setInterval to handle that.\n        if (this.settings.polling) {\n            this.timerId = window.setInterval(this.sendHeight, this.settings.polling);\n        }\n\n        _markWhetherEmbedded(config.onMarkedEmbeddedStatus);\n\n        return this;\n    };\n\n    // Initialize elements with pym data attributes\n    // if we are not in server configuration\n    if(typeof document !== \"undefined\") {\n        lib.autoInit(true);\n    }\n\n    return lib;\n});\n\n"],"names":["noop","assign","target","k","source","i","len","arguments","length","appendNode","node","appendChild","insertNode","anchor","insertBefore","detachNode","parentNode","removeChild","detachBetween","before","after","nextSibling","destroyEach","iterations","detach","start","destroy","createElement","name","document","createSvgElement","createElementNS","createText","data","createTextNode","createComment","addListener","event","handler","addEventListener","removeListener","removeEventListener","setAttribute","attribute","value","linear","t","generateRule","a","b","delta","duration","ease","fn","keyframes","p","hash","str","charCodeAt","wrapTransition","component","params","intro","outgroup","cssText","obj","easing","css","transitionManager","stylesheet","style","head","sheet","delay","tick","callback","program","window","performance","now","pending","this","running","add","fire","Math","abs","end","rule","addRule","animation","split","filter","anim","test","concat","join","deleteRule","differs","dispatchObservers","group","newState","oldState","key","newValue","oldValue","callbacks","__calling","call","callAll","fns","pop","councillorsElected","councilTurnout","councilTableData","row","candidate","faction","ticket","votes","factionColor","tickClass","fade","ref","o","getComputedStyle","opacity","cubicOut","f","slide","height","parseFloat","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth","min","toggleTableDisplay","displayTable","councilSeatArray","collatedResults","copy","councilturnout","councilanalysis","numberOfElectedDelegates","nusTurnout","nusTableData","nusSeatArray","nusturnout","nusanalysis","presSummary","presboothscounted","numberofbooths","presturnout","presCandidate","percent","barPercentage","color","presTableData","booth","grant","grantpercent","pytka","pytkapercent","ma","mapercent","informal","informalpercent","total","presanalysis","mintPercentageText","mintTotal","heatTotal","heatPercentage","honiBoothsCounted","numberOfBooths","honiTurnout","mintColor","heatColor","mintPercentageBar","honiTableData","heat","heatpercent","mint","mintpercent","colors","honiboothscounted","honiturnout","honianalysis","tableData","extraFire","visiblePosts","loadMoreButtonVisible","blogData","blogtitle","post","highlight","heading","meta","body","loadMorePosts","publishedPosts","toggleTab","currentPane","footnotes","indicateLive","headerStandfirst","hasConnection","pymUpdateHeight","appWidth","displayresults","headerstandfirst","newData","indicatelive","transition","transitions","push","bound","next","bind","activeRules","insertRule","cssRules","done","update","splice","slice","proto","_state","eventName","handlers","_handlers","options","defer","_observers","pre","init","index","indexOf","on","_set","_root","_lock","_beforecreate","_oncreate","_aftercreate","observe","forEach","seatColor","constructedRef","seatElement","_this","refs","fill","council","map","object","augmentedCandidate","elected","candidateFactionColor","sort","Number","electedMajorityCouncillors","councillor","inlikelymajority","electedMinorityCouncillors","emptySeats","fillSeats","Array","seat","toggleElement","toggleText","set","textContent","nus","electedDelegates","numberOfEmptySeats","summaryObject","pres","presResultArray","pytkaSummary","toFixed","grantSummary","maSummary","informalSummary","candidateSummary","totalCountedVotes","mintPercentage","isNaN","honi","Object","keys","blog","published","reverse","newNumberOfPosts","morePosts","paneToShow","masthead","results","restructuredResults","restructuredData","pymChild","factory","module","exports","pym","lib","_raiseCustomEvent","createEvent","initEvent","dispatchEvent","_getParameterByName","RegExp","replace","exec","location","search","decodeURIComponent","_isSafeMessage","e","settings","xdomain","origin","match","_makeMessage","id","messageType","message","_makeMessageRegex","bits","_getNow","Date","getTime","_throttle","func","wait","context","args","result","timeout","previous","later","leading","apply","remaining","trailing","setTimeout","_cleanAutoInitInstances","idx","autoInitInstances","instance","el","getElementsByTagName","contentWindow","autoInit","doNotRaiseEvents","elements","querySelectorAll","element","random","toString","substr","src","getAttribute","title","allowfullscreen","parenturlvalue","trackscroll","config","n","err","parent","Parent","url","getElementById","iframe","href","messageRegex","messageHandlers","_constructIframe","width","offsetWidth","hashIndex","substring","optionalparams","encodeURIComponent","parenturlparam","undefined","sandbox","firstChild","_onResize","_throttleOnScroll","sendWidth","sendViewportAndIFramePosition","_onScroll","_fire","remove","_processMessage","_onHeightMessage","parseInt","_onNavigateToMessage","_onScrollToChildPosMessage","totalOffset","getBoundingClientRect","top","pageYOffset","scrollTo","onMessage","sendMessage","postMessage","iframeRect","payload","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","left","bottom","right","scrollwait","Child","parentWidth","parentTitle","parentUrl","timerId","_onWidthMessage","renderCallback","sendHeight","offsetHeight","getParentPositionInfo","scrollParentTo","navigateParentTo","scrollParentToChildEl","topPos","scrollParentToChildPos","pos","polling","setInterval","onMarkedEmbeddedStatus","newClassForHtml","htmlElement","originalHtmlClasses","className","self","log","appData","retirementData","app","App"],"mappings":"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"}