<:Window bind:innerWidth='appWidth'/>

<Header headerStandfirst='{{collatedResults.copy[0].headerstandfirst}}'/>
{{#if '1'===collatedResults.copy[0].displayresults}}
	{{#if appWidth < 500 }}
		<TabBar
			currentPane='results'
			collatedResults='{{collatedResults}}'
			blogData='{{blogData}}'
		/>
	{{else}}
		<article>
			<Results collatedResults='{{collatedResults}}'/>
			<Blog blogData='{{blogData}}'/>
		</article>
	{{/if}}
{{else}}
	<BlogOnlyWrapper blogData='{{blogData}}' />
{{/if}}
<Footer />

<style>
	article {
		display: flex;
	}
</style>

<script>
	import TabBar from './components/TabBar.html';
	import Footer from './components/Footer.html';
	import Blog from './components/Blog.html';
	import BlogOnlyWrapper from './components/BlogOnlyWrapper.html';
	import Header from './components/Header.html';
	import Results from './components/Results.html';

	export default {
    components: {
			Blog,
			BlogOnlyWrapper,
			Results,
			Header,
			TabBar,
			Footer,
		},

		computed: {
			collatedResults: (results, colors) => {
				const restructuredResults = {};
				restructuredResults['council'] = results.council;
				restructuredResults['honi'] = results.honi;
				restructuredResults['nus'] = results.nus;
				restructuredResults['pres'] = results.pres;
				restructuredResults['copy'] = results.copy;
				restructuredResults['colors'] = colors;
				return restructuredResults;
			},
			blogData: results => {
				const restructuredData = {};
				restructuredData['blog'] = results.blog;
				restructuredData['copy'] = results.copy;
				return restructuredData;
			}
		}
  };
</script>
